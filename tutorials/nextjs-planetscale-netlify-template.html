<!DOCTYPE html><html lang="en"><head><meta content="IE=edge" http-equiv="X-UA-Compatible"/><meta content="#262626" name="theme-color"/><link rel="mask-icon" href="/favicon.svg" color="#262626"/><script>!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics._writeKey="gURNntij37hKxpSUjda9znzNaOxZBG6H";;analytics.SNIPPET_VERSION="4.15.3";
analytics.load("gURNntij37hKxpSUjda9znzNaOxZBG6H");
analytics.page();
}}();</script><link rel="preload" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" as="style"/><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement;d.classList.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&false)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';d.classList.add('dark')}else{d.style.colorScheme = 'light';d.classList.add('light')}}else if(e){d.classList.add(e|| '')}else{d.classList.add('dark')}if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'dark'}catch(e){}}()</script><link rel="shortcut icon" href="/favicon_system.svg" sizes="any" type="image/svg+xml"/><title>Next.js and PlanetScale Netlify Template Tutorial - Documentation - ChattyCloud</title><meta name="msapplication-TileColor" content="#da532c"/><meta name="description" content="Build and deploy a Next.js admin dashboard with NextAuth.js, PlanetScale, Prisma, and Netlify."/><meta property="og:url" content="https://docs.chatty-cloud.com/tutorials/nextjs-planetscale-netlify-template"/><meta property="og:image" content="https://docs.chatty-cloud.com//img/internals/social_share.png"/><meta property="og:type" content="website"/><meta property="og:title" content="Next.js and PlanetScale Netlify Template Tutorial - Documentation - ChattyCloud"/><meta property="og:description" content="Build and deploy a Next.js admin dashboard with NextAuth.js, PlanetScale, Prisma, and Netlify."/><meta name="twitter:url" content="https://docs.chatty-cloud.com/tutorials/nextjs-planetscale-netlify-template"/><meta name="twitter:image" content="https://docs.chatty-cloud.com//img/internals/social_share.png"/><meta name="twitter:title" content="Next.js and PlanetScale Netlify Template Tutorial - Documentation - ChattyCloud"/><meta name="twitter:description" content="Build and deploy a Next.js admin dashboard with NextAuth.js, PlanetScale, Prisma, and Netlify."/><script type="application/ld+json">{&quot;@context&quot;:&quot;http://schema.org&quot;,&quot;@type&quot;:&quot;Organization&quot;,&quot;name&quot;:&quot;ChattyCloud, Inc.&quot;,&quot;url&quot;:&quot;https://docs.chatty-cloud.com&quot;,&quot;sameAs&quot;:[&quot;https://twitter.com/&quot;],&quot;address&quot;:{&quot;@type&quot;:&quot;PostalAddress&quot;,&quot;streetAddress&quot;:&quot;321 Castro St #200&quot;,&quot;addressLocality&quot;:&quot;Mountain View&quot;,&quot;addressRegion&quot;:&quot;CA&quot;,&quot;postalCode&quot;:&quot;94041&quot;,&quot;addressCountry&quot;:&quot;US&quot;}}</script><meta name="next-head-count" content="18"/><link rel="preload" href="/docs/_next/static/css/d19452855f080e47.css" as="style"/><link rel="stylesheet" href="/docs/_next/static/css/d19452855f080e47.css" data-n-g=""/><link rel="preload" href="/docs/_next/static/css/6ed6fc696efb435c.css" as="style"/><link rel="stylesheet" href="/docs/_next/static/css/6ed6fc696efb435c.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/docs/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/docs/_next/static/chunks/webpack-21775410f7f02689.js" defer=""></script><script src="/docs/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/docs/_next/static/chunks/main-d78ee85becc0fade.js" defer=""></script><script src="/docs/_next/static/chunks/pages/_app-4f84c90584aacdb0.js" defer=""></script><script src="/docs/_next/static/chunks/217-13521f692b432699.js" defer=""></script><script src="/docs/_next/static/chunks/228-546d180dcfb89379.js" defer=""></script><script src="/docs/_next/static/chunks/476-dd807cdaa38948ef.js" defer=""></script><script src="/docs/_next/static/chunks/pages/%5Bcategory%5D/%5Bpost%5D-0dfa5a716bfbcb43.js" defer=""></script><script src="/docs/_next/static/ffRgkaqinJ87gnfSh8k4z/_buildManifest.js" defer=""></script><script src="/docs/_next/static/ffRgkaqinJ87gnfSh8k4z/_ssgManifest.js" defer=""></script><script src="/docs/_next/static/ffRgkaqinJ87gnfSh8k4z/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div><div class="h-full"><div class="flex flex-col mx-auto bg-primary text-primary"><a href="#content" class="absolute z-50 px-2 py-1 border-b border-r rounded-br -ml-96 focus:ml-0 bg-secondary">Skip to content</a><div class="relative z-40 w-full py-3 mx-auto border-b bg-primary text-primary"><div class="md:hidden duration-300 fixed z-30 inset-0 transition-opacity opacity-0 pointer-events-none" aria-hidden="true"><div class="absolute inset-0 bg-primary"></div></div><header class="relative z-50 grid items-center grid-cols-2 px-3 mx-auto md:grid-cols-3 md:grid-rows-1 max-w-7xl sm:px-6 lg:px-8"><div class="flex items-center col-start-1 row-start-1"><a class="rounded text-primary" aria-label="Go to documentation homepage" href="https://chatty-cloud.com"><svg width="41" height="32" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 41 32"><path d="M106.967+511.808C106.967+423.665+178.421+352.211+266.564+352.211C354.708+352.211+426.162+423.665+426.162+511.808C426.162+599.951+354.708+671.406+266.564+671.406C178.421+671.406+106.967+599.951+106.967+511.808Z" fill="currentColor"></path></svg></a><div class="flex items-center lg:text-lg font-medium pl-1.5"><a class="text-primary" href="/docs">Documentation</a></div></div><div class="col-start-1 col-span-2 md:col-span-1 pt-3 md:pt-0 row-start-3 md:col-start-2 md:row-start-1 md:flex hidden"><input type="search" class="w-full leading-[1.5rem] px-1.5 rounded ring-offset-0 border shadow-sm text-base py-sm focus-ring bg-secondary text-primary border-secondary" id="searchbox" placeholder="Search documentation"/></div><div class="col-start-1 col-span-2 md:col-span-1 row-start-2 pt-5 md:pt-0 md:row-start-1 md:col-start-3 md:justify-end md:flex hidden"><a href="https://dashboard.chatty-cloud.com" class="mr-2 box-border relative inline-flex items-center justify-center text-center no-underline leading-none whitespace-nowrap font-semibold rounded flex-shrink-0 transition select-none overflow-hidden focus-ring text-primary hover:bg-secondary focus:border-blue-500 border border-gray-200 dark:border-gray-600 bg-primary h-button py-1.5 px-2">dashboard</a></div><div class="relative z-50 flex justify-end col-start-2 row-start-1 align-center md:hidden"><button aria-label="Open navigation menu" class="flex appearance-none focus:outline-none"><span class="HamburgerMenu_menuWrapper__TCSWe" data-open="false"><span class="HamburgerMenu_menu__fxUil"></span></span></button></div></header><div class="relative z-40 w-full px-3 pt-3 sm:px-6 lg:px-8 sm:w-1/2 md:hidden hidden"><div class="mb-3"><strong class="block mb-1">Quick Start</strong><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/chattycloud-workflow">ChattyCloud workflow</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/branching">Branching</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/connection-strings">Connection strings</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/database-imports">Database imports</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/regions">Regions</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/nonblocking-schema-changes">Non-blocking schema changes</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/web-console">Web console</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/authentication-methods">Authentication methods</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/mfa">Multi-factor authentication</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/sso">Single sign-on</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/security">Security &amp; Compliance</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/access-control">Access control</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/audit-log">Audit log</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/security-log">Security log</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/query-statistics">Query statistics</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/billing">Billing</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/back-up-and-restore">Back up and restore</a></span></div><div class="mb-3"><strong class="block mb-1">Tutorials</strong><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/chattycloud-quick-start-guide">ChattyCloud quick start guide</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/connect-any-application">Connect any app</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/connect-rails-app">Connect a Rails app</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/connect-nodejs-app">Connect a Node.js app</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/nextjs-chattycloud-netlify-template">Next.js and Netlify Template</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/deploy-to-vercel">Deploy to Vercel</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/prisma-data-platform-integration">Prisma Data Platform integration</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/automatic-rails-migrations">Automatic Rails migrations</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/automatic-prisma-migrations">Automatic Prisma migrations</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/change-unique-key">Change single unique key</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/operating-without-foreign-keys">Operating without FK constraints</a></span></div><div class="mb-3"><strong class="block mb-1">Reference</strong><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/reference/chattycloud-environment-setup">ChattyCloud environment set up</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/reference/chattycloud-cli">ChattyCloud CLI</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/reference/secure-connections">Secure connections</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/reference/service-tokens">Service tokens</a></span></div><div class="flex items-stretch shadow-sm rounded text-primary inline-flex"><label class="flex items-center px-1.5 mb-0 font-medium border-t border-b border-l rounded-l bg-secondary border-secondary whitespace-nowrap text-sm py-1 h-button-sm">Theme</label><select class="inline-block pl-1.5 pr-4 py-0 border rounded shadow-sm bg-primary border-secondary focus-ring h-button-sm text-sm block w-full pl-2 rounded-l-none rounded-r !shadow-none"><option value="light">Light</option><option value="dark">Dark</option><option value="system">System</option></select></div></div></div><main class="flex flex-col flex-1 w-full px-3 py-4 mx-auto bg-primary md:py-8 max-w-7xl sm:px-6 lg:px-8"><div class="flex flex-col h-full md:flex-row"><div class="flex-shrink-0 hidden w-full md:block md:w-1/3 md:pr-4 lg:pr-8 xl:pr-12"><div class="mb-3"><strong class="block mb-1">Quick Start</strong><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/chattycloud-workflow">ChattyCloud workflow</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/branching">Branching</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/connection-strings">Connection strings</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/database-imports">Database imports</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/regions">Regions</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/nonblocking-schema-changes">Non-blocking schema changes</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/web-console">Web console</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/authentication-methods">Authentication methods</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/mfa">Multi-factor authentication</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/sso">Single sign-on</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/security">Security &amp; Compliance</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/access-control">Access control</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/audit-log">Audit log</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/security-log">Security log</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/query-statistics">Query statistics</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/billing">Billing</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/back-up-and-restore">Back up and restore</a></span></div><div class="mb-3"><strong class="block mb-1">Tutorials</strong><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/chattycloud-quick-start-guide">ChattyCloud quick start guide</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/connect-any-application">Connect any app</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/connect-rails-app">Connect a Rails app</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/connect-nodejs-app">Connect a Node.js app</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/nextjs-chattycloud-netlify-template">Next.js and Netlify Template</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/deploy-to-vercel">Deploy to Vercel</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/prisma-data-platform-integration">Prisma Data Platform integration</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/automatic-rails-migrations">Automatic Rails migrations</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/automatic-prisma-migrations">Automatic Prisma migrations</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/change-unique-key">Change single unique key</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/operating-without-foreign-keys">Operating without FK constraints</a></span></div><div class="mb-3"><strong class="block mb-1">Reference</strong><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/reference/chattycloud-environment-setup">ChattyCloud environment set up</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/reference/chattycloud-cli">ChattyCloud CLI</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/reference/secure-connections">Secure connections</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/reference/service-tokens">Service tokens</a></span></div><div class="flex items-stretch shadow-sm rounded text-primary inline-flex"><label class="flex items-center px-1.5 mb-0 font-medium border-t border-b border-l rounded-l bg-secondary border-secondary whitespace-nowrap text-sm py-1 h-button-sm">Theme</label><select class="inline-block pl-1.5 pr-4 py-0 border rounded shadow-sm bg-primary border-secondary focus-ring h-button-sm text-sm block w-full pl-2 rounded-l-none rounded-r !shadow-none"><option value="light">Light</option><option value="dark">Dark</option><option value="system">System</option></select></div></div><div class="relative flex-1 min-w-0"><div class="mdx-content"><div class="mb-4"><h1 class="mb-1 text-4xl font-semibold">Next.js and PlanetScale Netlify Template Tutorial</h1><p class="text-xl text-secondary">Build and deploy a Next.js admin dashboard with NextAuth.js, PlanetScale, Prisma, and Netlify.</p></div><div><a class="text-primary" href="#overview"><h1 class="font-semibold text-xl mb-2 mt-3" as="h2" id="overview">Overview</h1></a><p>This guide will show you how to get up and running with the <a href="https://templates.netlify.com/template/nextjs-planetscale-starter/">Netlify, Next.js, and PlanetScale starter template</a>. The template includes the following features:</p><ul><li>Simple user admin dashboard</li><li><a href="https://planetscale.com/">PlanetScale</a> serverless database</li><li><a href="https://www.prisma.io/">Prisma ORM</a> integration</li><li><a href="https://nextjs.org/docs/authentication">Next.js authentication</a></li><li>One-click <a href="https://netlify.com">deploy to Netlify</a></li><li><a href="https://tailwindcss.com/">Tailwind CSS</a> styling</li></ul><p>You can see a <a href="https://nextjs-planetscale-starter.netlify.app/">live demo of the starter application here</a>.</p><p><span class="block mt-3"><img src="/img/docs/nextjs-admin-dashboard.png" alt="Example of the dashboard application" class="max-h-[600px] mx-auto"/><span class="block mt-1 mb-4 text-sm text-center text-secondary">Example of the dashboard application</span></span></p><div class="my-4 border mb-3 px-3 py-2.5 rounded bg-blue-50 dark:bg-blue-900 border-blue-100 dark:border-blue-800"><strong>Note</strong> <!-- --> <div class="mt-1 info-block">If you&#x27;re coming from the <a href="https://templates.netlify.com/template/nextjs-planetscale-starter/"><strong>Netlify Template</strong></a> and you already clicked deploy, you&#x27;re in the right place! This tutorial will walk you through how to set up your PlanetScale database so that you can fill in the environment variables in the Netlify dashboard. You&#x27;ll also learn how to set up your local environment so you can continue to develop and extend this starter template. Just read through the prerequisites and then skip the first section to <a href="#set-up-the-project-locally">go straight to the local setup</a>.<br/><br/>If you&#x27;re <strong>starting fresh and haven&#x27;t deployed yet</strong> (or don&#x27;t want to deploy), you can start from the beginning of this tutorial.</div></div><a class="text-primary" href="#prerequisites"><h1 class="font-semibold text-lg mb-2 mt-3" as="h3" id="prerequisites">Prerequisites</h1></a><p>To follow along with this guide, you&#x27;ll need the following:</p><ul><li>A <a href="https://auth.planetscale.com/sign-up">free PlanetScale account</a></li><li>The <a href="https://github.com/planetscale/cli#installation">PlanetScale CLI</a></li><li><a href="https://yarnpkg.com/getting-started/install">Yarn</a></li><li><a href="https://nodejs.org/en/">Node (LTS)</a></li><li>A <a href="https://app.netlify.com/signup">free Netlify account</a></li></ul><a class="text-primary" href="#one-click-deploy-to-netlify"><h1 class="font-semibold text-xl mb-2 mt-3" as="h2" id="one-click-deploy-to-netlify">One-click deploy to Netlify</h1></a><p>The one-click deploy button allows you to connect Netlify to your GitHub account to clone the <code>nextjs-planetscale-starter</code> repository and automatically deploy it. Be sure to <a href="https://app.netlify.com/signup">sign up for a Netlify account</a> before clicking the deploy button.</p><p><a href="https://app.netlify.com/start/deploy?repository=https://github.com/planetscale/nextjs-planetscale-starter"><span class="block mt-3"><img src="https://www.netlify.com/img/deploy/button.svg" alt="Deploy to Netlify button" class="max-h-[600px] mx-auto"/><span class="block mt-1 mb-4 text-sm text-center text-secondary">Deploy to Netlify button</span></span></a></p><p>Once you click the button, you&#x27;ll be taken to Netlify’s direct deploy page with the pre-built project’s repository passed as a parameter in the URL. Click the &quot;<strong>Connect to GitHub</strong>&quot; button to authorize access.</p><p>Next, you&#x27;ll be asked to configure your site variables. For the <code>Secret</code> value, navigate to <a href="https://generate-secret.now.sh/32"><code>https://generate-secret.now.sh/32</code></a> to generate a secret and then paste that in. You can leave the <code>Database URL</code> and <code>NextAuth URL</code> values blank for now. Click &quot;Save &amp; Deploy&quot;.</p><p>Your site will take about a minute to build and then you&#x27;ll be taken to a settings page. A unique Netlify URL will be generated for the project. You can click that now to see your live site! The next section will show you how to set the project up locally and create your PlanetScale database to connect to your live site.</p><a class="text-primary" href="#set-up-the-project-locally"><h1 class="font-semibold text-xl mb-2 mt-3" as="h2" id="set-up-the-project-locally">Set up the project locally</h1></a><p>If you already went through the <a href="https://templates.netlify.com/template/nextjs-planetscale-starter/">Netlify deployment</a>, find the repository that was created for you in your GitHub account and clone it.</p><p>If you didn&#x27;t deploy and just want to run the template locally, you can clone the <a href="https://github.com/planetscale/nextjs-planetscale-starter"><code>nextjs-planetscale-starter</code> repository</a>.</p><p>Enter into the folder and install the dependencies:</p><pre><div class="max-w-full mt-2 mb-4 border rounded"><div class="flex items-center justify-between px-2 border-b rounded-t py-sm bg-secondary"><span class="font-sans text-secondary"></span><div class="relative inline-flex"><button aria-label="Copy snippet" title="Copy snippet" type="button" class="undefined h-[32px] h-button px-1 focus-visible-ring"></button><div class="font-sans pointer-events-none transition absolute z-10 px-1 text-white font-semibold dark:bg-gray-50 dark:text-gray-900 text-sm transform -translate-x-1/2 bg-gray-900 rounded shadow-lg py-sm left-1/2 top-1/2 opacity-0">Copied</div></div></div><div class="w-full p-2 overflow-x-auto"><div><div class="token-line" style="color:#9a86fd"><span class="token plain">yarn install</span></div></div></div></div></pre><p>Run the application with:</p><pre><div class="max-w-full mt-2 mb-4 border rounded"><div class="flex items-center justify-between px-2 border-b rounded-t py-sm bg-secondary"><span class="font-sans text-secondary"></span><div class="relative inline-flex"><button aria-label="Copy snippet" title="Copy snippet" type="button" class="undefined h-[32px] h-button px-1 focus-visible-ring"></button><div class="font-sans pointer-events-none transition absolute z-10 px-1 text-white font-semibold dark:bg-gray-50 dark:text-gray-900 text-sm transform -translate-x-1/2 bg-gray-900 rounded shadow-lg py-sm left-1/2 top-1/2 opacity-0">Copied</div></div></div><div class="w-full p-2 overflow-x-auto"><div><div class="token-line" style="color:#9a86fd"><span class="token plain">yarn next</span></div></div></div></div></pre><p>Navigate to <a href="http://localhost:3000/">http://localhost:3000/</a> in your browser to view the PlanetScale Next.js Starter app.</p><p><span class="block mt-3"><img src="/img/docs/planetscale-nextjs-application.png" alt="Next.js PlanetScale Starter application homepage" class="max-h-[600px] mx-auto"/><span class="block mt-1 mb-4 text-sm text-center text-secondary">Next.js PlanetScale Starter application homepage</span></span></p><a class="text-primary" href="#database-setup"><h1 class="font-semibold text-xl mb-2 mt-3" as="h2" id="database-setup">Database setup</h1></a><p>Next, you need to set up your PlanetScale database. If you don&#x27;t already have a <a href="https://docs.planetscale.com/concepts/billing#planetscale-plans">PlanetScale account</a>, you can <a href="https://auth.planetscale.com/sign-up">sign up for a free one here</a>.</p><a class="text-primary" href="#create-your-database"><h1 class="font-semibold text-lg mb-2 mt-3" as="h3" id="create-your-database">Create your database</h1></a><p>To begin, create a new database. You can either do this in the dashboard or using the <a href="https://docs.planetscale.com/reference/planetscale-cli">PlanetScale CLI</a>.</p><p>In the dashboard, click on the &quot;<strong>Create a database</strong>&quot; button. Name your database &quot;<code>netlify-starter</code>&quot;, or whatever name you wish. Select the region closest to you, and click &quot;<strong>Create database</strong>&quot;.</p><p>Next, go to the &quot;<strong>Settings</strong>&quot; page for your database and check the &quot;<strong>Automatically copy migration data</strong>&quot; box, select &quot;<strong>Prisma</strong>&quot; from the &quot;Migration framework&quot; dropdown, and click &quot;<strong>Save</strong>&quot;.</p><p>Alternatively, <a href="/tutorials/planetscale-quick-start-guide#quick-start-with-the-planetscale-cli">sign in and create a database with the CLI</a> by running the following:</p><pre><div class="max-w-full mt-2 mb-4 border rounded"><div class="flex items-center justify-between px-2 border-b rounded-t py-sm bg-secondary"><span class="font-sans text-secondary"></span><div class="relative inline-flex"><button aria-label="Copy snippet" title="Copy snippet" type="button" class="undefined h-[32px] h-button px-1 focus-visible-ring"></button><div class="font-sans pointer-events-none transition absolute z-10 px-1 text-white font-semibold dark:bg-gray-50 dark:text-gray-900 text-sm transform -translate-x-1/2 bg-gray-900 rounded shadow-lg py-sm left-1/2 top-1/2 opacity-0">Copied</div></div></div><div class="w-full p-2 overflow-x-auto"><div><div class="token-line" style="color:#9a86fd"><span class="token plain">pscale database create &lt;database-name&gt; -regionSlug</span></div></div></div></div></pre><p>The list of region slugs can be found in our <a href="https://docs.planetscale.com/concepts/regions#available-regions">Regions documentation</a>. You&#x27;ll still need to go into the dashboard to enable automatically copying the migration data.</p><a class="text-primary" href="#set-up-prisma-shadow-branch"><h1 class="font-semibold text-lg mb-2 mt-3" as="h3" id="set-up-prisma-shadow-branch">Set up Prisma shadow branch</h1></a><p>Next, you need to set up the <a href="https://www.prisma.io/docs/concepts/components/prisma-migrate/shadow-database">Prisma shadow branch</a>. This is a temporary database used for Prisma development.</p><p>To create the Prisma shadow branch:</p><ul><li>Click on your <code>netlify-starter</code> database in your PlanetScale dashboard.</li><li>Click on the &quot;<strong>New branch</strong>&quot; button.</li><li>Name the branch <code>shadow</code>.</li><li>Leave the base branch as <code>main</code>.</li><li>Select the region closest to you or your application.</li><li>Click &quot;<strong>Create branch</strong>&quot;.</li></ul><a class="text-primary" href="#connect-to-your-database-branches-locally"><h1 class="font-semibold text-lg mb-2 mt-3" as="h3" id="connect-to-your-database-branches-locally">Connect to your database branches locally</h1></a><p>To connect locally, make sure you&#x27;ve authenticated in the CLI. If not, follow the directions in the <a href="/tutorials/planetscale-quick-start-guide#sign-in-to-your-account">sign-in section of our quick start guide</a>.</p><p>Next, connect to your <code>main</code> and <code>shadow</code> branches locally by running the following in your terminal in two separate tabs:</p><pre><div class="max-w-full mt-2 mb-4 border rounded"><div class="flex items-center justify-between px-2 border-b rounded-t py-sm bg-secondary"><span class="font-sans text-secondary"></span><div class="relative inline-flex"><button aria-label="Copy snippet" title="Copy snippet" type="button" class="undefined h-[32px] h-button px-1 focus-visible-ring"></button><div class="font-sans pointer-events-none transition absolute z-10 px-1 text-white font-semibold dark:bg-gray-50 dark:text-gray-900 text-sm transform -translate-x-1/2 bg-gray-900 rounded shadow-lg py-sm left-1/2 top-1/2 opacity-0">Copied</div></div></div><div class="w-full p-2 overflow-x-auto"><div><div class="token-line" style="color:#9a86fd"><span class="token plain">pscale connect &lt;database-name&gt; main --port &lt;port&gt;</span></div></div></div></div></pre><pre><div class="max-w-full mt-2 mb-4 border rounded"><div class="flex items-center justify-between px-2 border-b rounded-t py-sm bg-secondary"><span class="font-sans text-secondary"></span><div class="relative inline-flex"><button aria-label="Copy snippet" title="Copy snippet" type="button" class="undefined h-[32px] h-button px-1 focus-visible-ring"></button><div class="font-sans pointer-events-none transition absolute z-10 px-1 text-white font-semibold dark:bg-gray-50 dark:text-gray-900 text-sm transform -translate-x-1/2 bg-gray-900 rounded shadow-lg py-sm left-1/2 top-1/2 opacity-0">Copied</div></div></div><div class="w-full p-2 overflow-x-auto"><div><div class="token-line" style="color:#9a86fd"><span class="token plain">pscale connect &lt;database-name&gt; shadow --port &lt;port&gt;</span></div></div></div></div></pre><p>Choose any unused port. This tutorial uses <code>3309</code> and <code>3310</code>. You&#x27;ll  see the response &quot;Secure connection to database <code>netlify-starter</code> and branch <code>main</code> is established!&quot; along with the local address that your application is on. Take note of that address for the next step.</p><a class="text-primary" href="#set-up-local-environment-variables"><h1 class="font-semibold text-xl mb-2 mt-3" as="h2" id="set-up-local-environment-variables">Set up local environment variables</h1></a><p>For the last part of setup, you need to fill in your environment variables. </p><p>Make a copy of the <code>.env.example</code> file at the root of your project and rename it <code>.env</code>:</p><pre><div class="max-w-full mt-2 mb-4 border rounded"><div class="flex items-center justify-between px-2 border-b rounded-t py-sm bg-secondary"><span class="font-sans text-secondary"></span><div class="relative inline-flex"><button aria-label="Copy snippet" title="Copy snippet" type="button" class="undefined h-[32px] h-button px-1 focus-visible-ring"></button><div class="font-sans pointer-events-none transition absolute z-10 px-1 text-white font-semibold dark:bg-gray-50 dark:text-gray-900 text-sm transform -translate-x-1/2 bg-gray-900 rounded shadow-lg py-sm left-1/2 top-1/2 opacity-0">Copied</div></div></div><div class="w-full p-2 overflow-x-auto"><div><div class="token-line" style="color:#9a86fd"><span class="token plain">cp .env.example .env</span></div></div></div></div></pre><p>The <code>DATABASE_URL</code> and <code>SHADOW_DATABASE_URL</code> values come from your PlanetScale database and will be in the following form:</p><p><code>mysql://&lt;user&gt;@&lt;address&gt;:&lt;port&gt;/&lt;database&gt;</code> </p><ul><li><code>user</code> <!-- -->—<!-- --> the database user</li><li><code>address</code> <!-- -->—<!-- --> the local address returned in the previous step</li><li><code>port</code> <!-- -->—<!-- --> the port you specified in the previous step </li><li><code>database</code> <!-- -->—<!-- --> the name of your database </li></ul><p>Below is an example of the <code>.env</code> file based on this tutorial:</p><pre><div class="max-w-full mt-2 mb-4 border rounded"><div class="flex items-center justify-between px-2 border-b rounded-t py-sm bg-secondary"><span class="font-sans text-secondary"></span><div class="relative inline-flex"><button aria-label="Copy snippet" title="Copy snippet" type="button" class="undefined h-[32px] h-button px-1 focus-visible-ring"></button><div class="font-sans pointer-events-none transition absolute z-10 px-1 text-white font-semibold dark:bg-gray-50 dark:text-gray-900 text-sm transform -translate-x-1/2 bg-gray-900 rounded shadow-lg py-sm left-1/2 top-1/2 opacity-0">Copied</div></div></div><div class="w-full p-2 overflow-x-auto"><div><div class="token-line" style="color:#9a86fd"><span class="token plain">DATABASE_URL=&quot;mysql://root@127.0.0.1:3309/netlify-starter&quot;</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">SHADOW_DATABASE_URL=&quot;mysql://root@127.0.0.1:3310/netlify-starter&quot;</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">NEXTAUTH_URL=http://localhost:3000</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain"># Navigate to https://generate-secret.now.sh/32 to generate a secret for the variable below</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">NEXTAUTH_SECRET=</span></div></div></div></div></pre><p>Remember, these are the values for your <strong>local environment</strong>. The values needed for the Netlify environment variables will be covered shortly.</p><a class="text-primary" href="#migrate-the-database"><h1 class="font-semibold text-xl mb-2 mt-3" as="h2" id="migrate-the-database">Migrate the database</h1></a><p>Now that your PlanetScale database is connected to your application, it&#x27;s time to <a href="https://www.prisma.io/docs/guides/database/developing-with-prisma-migrate">run migrations</a> and seed the database with some sample users.</p><p>In your terminal, run:</p><pre><div class="max-w-full mt-2 mb-4 border rounded"><div class="flex items-center justify-between px-2 border-b rounded-t py-sm bg-secondary"><span class="font-sans text-secondary"></span><div class="relative inline-flex"><button aria-label="Copy snippet" title="Copy snippet" type="button" class="undefined h-[32px] h-button px-1 focus-visible-ring"></button><div class="font-sans pointer-events-none transition absolute z-10 px-1 text-white font-semibold dark:bg-gray-50 dark:text-gray-900 text-sm transform -translate-x-1/2 bg-gray-900 rounded shadow-lg py-sm left-1/2 top-1/2 opacity-0">Copied</div></div></div><div class="w-full p-2 overflow-x-auto"><div><div class="token-line" style="color:#9a86fd"><span class="token plain">yarn db:migrate</span></div></div></div></div></pre><p>Name your migration <code>initial-migration</code>. This will create a new migration file under <code>db/migrations</code>.</p><p>You can view the schema in your PlanetScale dashboard by clicking the <code>netlify-starter</code> database &gt; &quot;<strong>Branches</strong>&quot; &gt; <code>main</code> &gt; &quot;<strong>Schema</strong>&quot; &gt; &quot;<strong>Refresh schema</strong>&quot;.</p><p>You&#x27;ll now see the following tables:</p><ul><li><code>Account</code></li><li><code>Session</code></li><li><code>User</code></li><li><code>VerificationToken</code></li><li><code>_prisma_migrations</code></li></ul><p>You can also verify it worked using the PlanetScale CLI. Run the following to start a MySQL shell (where <code>netlify-starter</code> is your database):</p><pre><div class="max-w-full mt-2 mb-4 border rounded"><div class="flex items-center justify-between px-2 border-b rounded-t py-sm bg-secondary"><span class="font-sans text-secondary"></span><div class="relative inline-flex"><button aria-label="Copy snippet" title="Copy snippet" type="button" class="undefined h-[32px] h-button px-1 focus-visible-ring"></button><div class="font-sans pointer-events-none transition absolute z-10 px-1 text-white font-semibold dark:bg-gray-50 dark:text-gray-900 text-sm transform -translate-x-1/2 bg-gray-900 rounded shadow-lg py-sm left-1/2 top-1/2 opacity-0">Copied</div></div></div><div class="w-full p-2 overflow-x-auto"><div><div class="token-line" style="color:#9a86fd"><span class="token plain">pscale shell netlify-starter main</span></div></div></div></div></pre><p>Once in the shell, view the tables with:</p><pre><div class="max-w-full mt-2 mb-4 border rounded"><div class="flex items-center justify-between px-2 border-b rounded-t py-sm bg-secondary"><span class="font-sans text-secondary"></span><div class="relative inline-flex"><button aria-label="Copy snippet" title="Copy snippet" type="button" class="undefined h-[32px] h-button px-1 focus-visible-ring"></button><div class="font-sans pointer-events-none transition absolute z-10 px-1 text-white font-semibold dark:bg-gray-50 dark:text-gray-900 text-sm transform -translate-x-1/2 bg-gray-900 rounded shadow-lg py-sm left-1/2 top-1/2 opacity-0">Copied</div></div></div><div class="w-full p-2 overflow-x-auto"><div><div class="token-line" style="color:#9a86fd"><span class="token plain">SHOW tables;</span></div></div></div></div></pre><p>Type <code>exit</code> to exit the MySQL shell.</p><p>The database schema, <code>db/schema.prisma</code>, has been loaded and your PlanetScale database is now ready for data.</p><a class="text-primary" href="#seed-the-database"><h1 class="font-semibold text-xl mb-2 mt-3" as="h2" id="seed-the-database">Seed the database</h1></a><p>To seed the database, run the following:</p><pre><div class="max-w-full mt-2 mb-4 border rounded"><div class="flex items-center justify-between px-2 border-b rounded-t py-sm bg-secondary"><span class="font-sans text-secondary"></span><div class="relative inline-flex"><button aria-label="Copy snippet" title="Copy snippet" type="button" class="undefined h-[32px] h-button px-1 focus-visible-ring"></button><div class="font-sans pointer-events-none transition absolute z-10 px-1 text-white font-semibold dark:bg-gray-50 dark:text-gray-900 text-sm transform -translate-x-1/2 bg-gray-900 rounded shadow-lg py-sm left-1/2 top-1/2 opacity-0">Copied</div></div></div><div class="w-full p-2 overflow-x-auto"><div><div class="token-line" style="color:#9a86fd"><span class="token plain">yarn db:seed</span></div></div></div></div></pre><p>This will add three mock users to the <code>User</code> database, as described in <code>db/seed.ts</code>. To verify that they were added, click on the &quot;<strong>Console</strong>&quot; tab in your PlanetScale dashboard on the <code>main</code> branch of your <code>netlify-starter</code> database.</p><p>Run the following:</p><pre><div class="max-w-full mt-2 mb-4 border rounded"><div class="flex items-center justify-between px-2 border-b rounded-t py-sm bg-secondary"><span class="font-sans text-secondary"></span><div class="relative inline-flex"><button aria-label="Copy snippet" title="Copy snippet" type="button" class="undefined h-[32px] h-button px-1 focus-visible-ring"></button><div class="font-sans pointer-events-none transition absolute z-10 px-1 text-white font-semibold dark:bg-gray-50 dark:text-gray-900 text-sm transform -translate-x-1/2 bg-gray-900 rounded shadow-lg py-sm left-1/2 top-1/2 opacity-0">Copied</div></div></div><div class="w-full p-2 overflow-x-auto"><div><div class="token-line" style="color:#9a86fd"><span class="token plain">SELECT * from User;</span></div></div></div></div></pre><p>You can also run this command from the CLI using the same <code>pscale shell</code> command mentioned above.</p><a class="text-primary" href="#netlify-environment-variables"><h1 class="font-semibold text-xl mb-2 mt-3" as="h2" id="netlify-environment-variables">Netlify environment variables</h1></a><p>Now that you have your site running locally, let&#x27;s shift back to the live Netlify site.</p><p>The final step in the site deployment is configuring your production environment variables. In the Netlify dashboard under your site&#x27;s settings page, click on &quot;<strong>Build &amp; deploy</strong>&quot; &gt; &quot;<strong>Environment</strong>&quot; in the left nav.</p><p>Click on the &quot;<strong>Edit variables</strong>&quot; button and enter in the following key/value pairs:</p><ul><li><code>DATABASE_URL</code> <!-- -->—<!-- --> To find this value, go back to your PlanetScale dashboard, click on the <code>netlify-starter</code> database, and select the <code>main</code> branch under &quot;<strong>Branches</strong>&quot;. Click on the &quot;<strong>Connect</strong>&quot; dropdown and then click the &quot;<strong>Generate new password</strong>&quot; button. Next, click on the &quot;<strong>General</strong>&quot;&quot; dropdown in that modal and select &quot;<strong>Prisma</strong>&quot;. Copy the value for <code>url</code> and paste that back in the Netlify dashboard as the value for <code>DATABASE_URL</code>. Be sure to save your PlanetScale password somewhere as you won&#x27;t be able to access it again after closing the modal.</li><li><code>NEXTAUTH_SECRET</code> <!-- -->—<!-- --> You may have already filled this out, but if not generate a new secret at <a href="https://generate-secret.now.sh/32">https://generate-secret.now.sh/32</a> and paste in the value that&#x27;s returned.</li><li><code>NEXTAUTH_URL</code> <!-- -->—<!-- --> Paste in the Netlify site name that was generated for you. For example, <code>https://stoic-lumiere-6df10.netlify.app</code></li></ul><p>Click &quot;<strong>Save</strong>&quot;. Now, redeploy the site with these new variables by going to &quot;Deploys&quot; in the top nav and clicking the &quot;<strong>Trigger deploy</strong>&quot; &gt; &quot;<strong>Deploy site</strong>&quot; button.</p><a class="text-primary" href="#set-up-your-admin-account"><h1 class="font-semibold text-xl mb-2 mt-3" as="h2" id="set-up-your-admin-account">Set up your admin account</h1></a><p>Now that your site is live and connected to your PlanetScale database, you need to set up your admin account for your application. Go to <code>/admin/setup</code> on your live Netlify site (or locally if you didn&#x27;t deploy), and fill in the form to set up your account. This will be automatically saved to your PlanetScale database.</p><p>Creating an admin account gives you access to the <code>/admin</code> route in your application, which is the dashboard to manage your users.</p><p>Once you&#x27;re signed in as an admin, navigate to <code>/admin</code> to see a list of your users.</p><a class="text-primary" href="#customize-and-extend"><h1 class="font-semibold text-xl mb-2 mt-3" as="h2" id="customize-and-extend">Customize and extend</h1></a><p>And that&#x27;s it! If you followed this tutorial completely, you now have a local and production version of your <strong>Next.js + PlanetScale + Prisma admin dashboard</strong>. So what&#x27;s next?</p><p>Now, it&#x27;s time to extend it! Next.js Authentication is baked into this starter, so you can explore the <a href="https://nextjs.org/docs/authentication">Next.js docs to manage authentication</a> in your application.</p><p>You also have a fully functional PlanetScale MySQL database built for scale using the power of <a href="https://vitess.io/">Vitess</a>. You might have noticed that this tutorial uses the same database locally as it is in production. This was just for simplicity, but with PlanetScale, you can take advantage of our <a href="/concepts/branching">powerful branching feature</a> to create development branches of your database specifically for testing locally. All you have to do is create a new branch and swap out the <code>DATABASE_URL</code> environment variable in your local <code>.env</code> file.</p><p>Finally, you have <a href="https://www.prisma.io/docs/">Prisma ORM</a> already configured in your application. If you want to add any more fields to your <code>User</code> table or create any new tables, Prisma makes it easy with the <code>schema.prisma</code> file. If you want to make any schema changes, it&#x27;s a perfect time to try out the <a href="/concepts/branching">PlanetScale branching feature</a>. If you mess up, those changes won&#x27;t touch production. And once you&#x27;re satisfied with the changes, you can deploy to production without causing downtime thanks to PlanetScale&#x27;s <a href="https://docs.planetscale.com/concepts/nonblocking-schema-changes">non-blocking schema changes</a>.</p><p>Hopefully this tutorial has been helpful. We&#x27;d love to hear how you&#x27;re extending your starter application. <a href="https://twitter.com/planetscaledata">Tweet us @PlanetScaleData</a> and share what you built!</p><a class="text-primary" href="#need-help?"><h1 class="font-semibold text-xl mb-2 mt-3" as="h2" id="need-help?">Need help?</h1></a><p>Get help from <a href="https://www.planetscale.com/support">PlanetScale&#x27;s support team</a>, or join our <a href="https://github.com/planetscale/beta/discussions">GitHub Discussion board</a> to see how others are using PlanetScale.</p></div><div class="flex items-center mt-4 mb-4"><strong class="mr-1">Was this page useful?</strong><button type="button" class="mr-1 box-border relative inline-flex items-center justify-center text-center no-underline leading-none whitespace-nowrap font-semibold rounded flex-shrink-0 transition select-none overflow-hidden focus-ring text-primary hover:bg-secondary focus:border-blue-500 border border-gray-200 dark:border-gray-600 bg-primary text-sm py-sm px-1">Yes</button><button type="button" class="box-border relative inline-flex items-center justify-center text-center no-underline leading-none whitespace-nowrap font-semibold rounded flex-shrink-0 transition select-none overflow-hidden focus-ring text-primary hover:bg-secondary focus:border-blue-500 border border-gray-200 dark:border-gray-600 bg-primary text-sm py-sm px-1">No</button></div><div class="flex flex-col sm:flex-row sm:items-center justify-between pb-4 border-b mb-4"><div class="text-secondary mb-1 sm:mb-0">Last updated on <!-- -->December<!-- --> <!-- -->25<!-- -->, <!-- -->2021</div><a href="https://github.com/chattycloud/docs/blob/main/content/docs/tutorials/nextjs-planetscale-netlify-template.mdx">Help us improve this page</a></div></div><div class="mt-4 flex items-center justify-between"><span><a class="mr-1.5 text-secondary hover:text-blue" href="https://www.chatty-cloud.com/legal/privacy">Privacy</a><a class="text-secondary hover:text-blue" href="https://www.chatty-cloud.com/legal/siteterms">Terms</a></span><span class="text-secondary">© 2021 ChattyCloud Inc.</span></div></div></div></main></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"title":"Next.js and PlanetScale Netlify Template Tutorial","subtitle":"Build and deploy a Next.js admin dashboard with NextAuth.js, PlanetScale, Prisma, and Netlify."},"headings":[{"depth":2,"value":"Overview"},{"depth":3,"value":"Prerequisites"},{"depth":2,"value":"One-click deploy to Netlify"},{"depth":2,"value":"Set up the project locally"},{"depth":2,"value":"Database setup"},{"depth":3,"value":"Create your database"},{"depth":3,"value":"Set up Prisma shadow branch"},{"depth":3,"value":"Connect to your database branches locally"},{"depth":2,"value":"Set up local environment variables"},{"depth":2,"value":"Migrate the database"},{"depth":2,"value":"Seed the database"},{"depth":2,"value":"Netlify environment variables"},{"depth":2,"value":"Set up your admin account"},{"depth":2,"value":"Customize and extend"},{"depth":2,"value":"Need help?"}],"body":{"compiledSource":"var c=Object.defineProperty,h=Object.defineProperties;var u=Object.getOwnPropertyDescriptors;var i=Object.getOwnPropertySymbols;var l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;var s=(a,t,n)=\u003et in a?c(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,e=(a,t)=\u003e{for(var n in t||(t={}))l.call(t,n)\u0026\u0026s(a,n,t[n]);if(i)for(var n of i(t))r.call(t,n)\u0026\u0026s(a,n,t[n]);return a},p=(a,t)=\u003eh(a,u(t));var d=(a,t)=\u003e{var n={};for(var o in a)l.call(a,o)\u0026\u0026t.indexOf(o)\u003c0\u0026\u0026(n[o]=a[o]);if(a!=null\u0026\u0026i)for(var o of i(a))t.indexOf(o)\u003c0\u0026\u0026r.call(a,o)\u0026\u0026(n[o]=a[o]);return n};const makeShortcode=a=\u003efunction(n){return console.warn(\"Component \"+a+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",e({},n))},InfoBlock=makeShortcode(\"InfoBlock\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var o=n,{components:a}=o,t=d(o,[\"components\"]);return mdx(MDXLayout,p(e(e({},layoutProps),t),{components:a,mdxType:\"MDXLayout\"}),mdx(\"h2\",null,\"Overview\"),mdx(\"p\",null,\"This guide will show you how to get up and running with the \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://templates.netlify.com/template/nextjs-planetscale-starter/\"}),\"Netlify, Next.js, and PlanetScale starter template\"),\". The template includes the following features:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Simple user admin dashboard\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"https://planetscale.com/\"}),\"PlanetScale\"),\" serverless database\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"https://www.prisma.io/\"}),\"Prisma ORM\"),\" integration\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"https://nextjs.org/docs/authentication\"}),\"Next.js authentication\")),mdx(\"li\",{parentName:\"ul\"},\"One-click \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://netlify.com\"}),\"deploy to Netlify\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"https://tailwindcss.com/\"}),\"Tailwind CSS\"),\" styling\")),mdx(\"p\",null,\"You can see a \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://nextjs-planetscale-starter.netlify.app/\"}),\"live demo of the starter application here\"),\".\"),mdx(\"p\",null,mdx(\"img\",e({parentName:\"p\"},{src:\"/img/docs/nextjs-admin-dashboard.png\",alt:\"Example of the dashboard application\"}))),mdx(InfoBlock,{type:\"note\",mdxType:\"InfoBlock\"},\"If you're coming from the \",mdx(\"a\",{href:\"https://templates.netlify.com/template/nextjs-planetscale-starter/\"},mdx(\"strong\",null,\"Netlify Template\")),\" and you already clicked deploy, you're in the right place! This tutorial will walk you through how to set up your PlanetScale database so that you can fill in the environment variables in the Netlify dashboard. You'll also learn how to set up your local environment so you can continue to develop and extend this starter template. Just read through the prerequisites and then skip the first section to \",mdx(\"a\",{href:\"#set-up-the-project-locally\"},\"go straight to the local setup\"),\".\",mdx(\"br\",null),mdx(\"br\",null),\"If you're \",mdx(\"strong\",null,\"starting fresh and haven't deployed yet\"),\" (or don't want to deploy), you can start from the beginning of this tutorial.\"),mdx(\"h3\",null,\"Prerequisites\"),mdx(\"p\",null,\"To follow along with this guide, you'll need the following:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"A \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://auth.planetscale.com/sign-up\"}),\"free PlanetScale account\")),mdx(\"li\",{parentName:\"ul\"},\"The \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://github.com/planetscale/cli#installation\"}),\"PlanetScale CLI\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"https://yarnpkg.com/getting-started/install\"}),\"Yarn\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"https://nodejs.org/en/\"}),\"Node (LTS)\")),mdx(\"li\",{parentName:\"ul\"},\"A \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://app.netlify.com/signup\"}),\"free Netlify account\"))),mdx(\"h2\",null,\"One-click deploy to Netlify\"),mdx(\"p\",null,\"The one-click deploy button allows you to connect Netlify to your GitHub account to clone the \",mdx(\"inlineCode\",{parentName:\"p\"},\"nextjs-planetscale-starter\"),\" repository and automatically deploy it. Be sure to \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://app.netlify.com/signup\"}),\"sign up for a Netlify account\"),\" before clicking the deploy button.\"),mdx(\"p\",null,mdx(\"a\",e({parentName:\"p\"},{href:\"https://app.netlify.com/start/deploy?repository=https://github.com/planetscale/nextjs-planetscale-starter\"}),mdx(\"img\",e({parentName:\"a\"},{src:\"https://www.netlify.com/img/deploy/button.svg\",alt:\"Deploy to Netlify button\"})))),mdx(\"p\",null,`Once you click the button, you'll be taken to Netlify\\u2019s direct deploy page with the pre-built project\\u2019s repository passed as a parameter in the URL. Click the \"`,mdx(\"strong\",{parentName:\"p\"},\"Connect to GitHub\"),'\" button to authorize access.'),mdx(\"p\",null,\"Next, you'll be asked to configure your site variables. For the \",mdx(\"inlineCode\",{parentName:\"p\"},\"Secret\"),\" value, navigate to \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://generate-secret.now.sh/32\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"https://generate-secret.now.sh/32\")),\" to generate a secret and then paste that in. You can leave the \",mdx(\"inlineCode\",{parentName:\"p\"},\"Database URL\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"NextAuth URL\"),' values blank for now. Click \"Save \u0026 Deploy\".'),mdx(\"p\",null,\"Your site will take about a minute to build and then you'll be taken to a settings page. A unique Netlify URL will be generated for the project. You can click that now to see your live site! The next section will show you how to set the project up locally and create your PlanetScale database to connect to your live site.\"),mdx(\"h2\",null,\"Set up the project locally\"),mdx(\"p\",null,\"If you already went through the \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://templates.netlify.com/template/nextjs-planetscale-starter/\"}),\"Netlify deployment\"),\", find the repository that was created for you in your GitHub account and clone it.\"),mdx(\"p\",null,\"If you didn't deploy and just want to run the template locally, you can clone the \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/planetscale/nextjs-planetscale-starter\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"nextjs-planetscale-starter\"),\" repository\"),\".\"),mdx(\"p\",null,\"Enter into the folder and install the dependencies:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-bash\"}),`yarn install\n`)),mdx(\"p\",null,\"Run the application with:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-bash\"}),`yarn next\n`)),mdx(\"p\",null,\"Navigate to \",mdx(\"a\",e({parentName:\"p\"},{href:\"http://localhost:3000/\"}),\"http://localhost:3000/\"),\" in your browser to view the PlanetScale Next.js Starter app.\"),mdx(\"p\",null,mdx(\"img\",e({parentName:\"p\"},{src:\"/img/docs/planetscale-nextjs-application.png\",alt:\"Next.js PlanetScale Starter application homepage\"}))),mdx(\"h2\",null,\"Database setup\"),mdx(\"p\",null,\"Next, you need to set up your PlanetScale database. If you don't already have a \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://docs.planetscale.com/concepts/billing#planetscale-plans\"}),\"PlanetScale account\"),\", you can \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://auth.planetscale.com/sign-up\"}),\"sign up for a free one here\"),\".\"),mdx(\"h3\",null,\"Create your database\"),mdx(\"p\",null,\"To begin, create a new database. You can either do this in the dashboard or using the \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://docs.planetscale.com/reference/planetscale-cli\"}),\"PlanetScale CLI\"),\".\"),mdx(\"p\",null,'In the dashboard, click on the \"',mdx(\"strong\",{parentName:\"p\"},\"Create a database\"),'\" button. Name your database \"',mdx(\"inlineCode\",{parentName:\"p\"},\"netlify-starter\"),'\", or whatever name you wish. Select the region closest to you, and click \"',mdx(\"strong\",{parentName:\"p\"},\"Create database\"),'\".'),mdx(\"p\",null,'Next, go to the \"',mdx(\"strong\",{parentName:\"p\"},\"Settings\"),'\" page for your database and check the \"',mdx(\"strong\",{parentName:\"p\"},\"Automatically copy migration data\"),'\" box, select \"',mdx(\"strong\",{parentName:\"p\"},\"Prisma\"),'\" from the \"Migration framework\" dropdown, and click \"',mdx(\"strong\",{parentName:\"p\"},\"Save\"),'\".'),mdx(\"p\",null,\"Alternatively, \",mdx(\"a\",e({parentName:\"p\"},{href:\"/tutorials/planetscale-quick-start-guide#quick-start-with-the-planetscale-cli\"}),\"sign in and create a database with the CLI\"),\" by running the following:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-bash\"}),`pscale database create \u003cdatabase-name\u003e -regionSlug\n`)),mdx(\"p\",null,\"The list of region slugs can be found in our \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://docs.planetscale.com/concepts/regions#available-regions\"}),\"Regions documentation\"),\". You'll still need to go into the dashboard to enable automatically copying the migration data.\"),mdx(\"h3\",null,\"Set up Prisma shadow branch\"),mdx(\"p\",null,\"Next, you need to set up the \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.prisma.io/docs/concepts/components/prisma-migrate/shadow-database\"}),\"Prisma shadow branch\"),\". This is a temporary database used for Prisma development.\"),mdx(\"p\",null,\"To create the Prisma shadow branch:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Click on your \",mdx(\"inlineCode\",{parentName:\"li\"},\"netlify-starter\"),\" database in your PlanetScale dashboard.\"),mdx(\"li\",{parentName:\"ul\"},'Click on the \"',mdx(\"strong\",{parentName:\"li\"},\"New branch\"),'\" button.'),mdx(\"li\",{parentName:\"ul\"},\"Name the branch \",mdx(\"inlineCode\",{parentName:\"li\"},\"shadow\"),\".\"),mdx(\"li\",{parentName:\"ul\"},\"Leave the base branch as \",mdx(\"inlineCode\",{parentName:\"li\"},\"main\"),\".\"),mdx(\"li\",{parentName:\"ul\"},\"Select the region closest to you or your application.\"),mdx(\"li\",{parentName:\"ul\"},'Click \"',mdx(\"strong\",{parentName:\"li\"},\"Create branch\"),'\".')),mdx(\"h3\",null,\"Connect to your database branches locally\"),mdx(\"p\",null,\"To connect locally, make sure you've authenticated in the CLI. If not, follow the directions in the \",mdx(\"a\",e({parentName:\"p\"},{href:\"/tutorials/planetscale-quick-start-guide#sign-in-to-your-account\"}),\"sign-in section of our quick start guide\"),\".\"),mdx(\"p\",null,\"Next, connect to your \",mdx(\"inlineCode\",{parentName:\"p\"},\"main\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"shadow\"),\" branches locally by running the following in your terminal in two separate tabs:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-bash\"}),`pscale connect \u003cdatabase-name\u003e main --port \u003cport\u003e\n`)),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-bash\"}),`pscale connect \u003cdatabase-name\u003e shadow --port \u003cport\u003e\n`)),mdx(\"p\",null,\"Choose any unused port. This tutorial uses \",mdx(\"inlineCode\",{parentName:\"p\"},\"3309\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"3310\"),`. You'll  see the response \"Secure connection to database `,mdx(\"inlineCode\",{parentName:\"p\"},\"netlify-starter\"),\" and branch \",mdx(\"inlineCode\",{parentName:\"p\"},\"main\"),' is established!\" along with the local address that your application is on. Take note of that address for the next step.'),mdx(\"h2\",null,\"Set up local environment variables\"),mdx(\"p\",null,\"For the last part of setup, you need to fill in your environment variables. \"),mdx(\"p\",null,\"Make a copy of the \",mdx(\"inlineCode\",{parentName:\"p\"},\".env.example\"),\" file at the root of your project and rename it \",mdx(\"inlineCode\",{parentName:\"p\"},\".env\"),\":\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-bash\"}),`cp .env.example .env\n`)),mdx(\"p\",null,\"The \",mdx(\"inlineCode\",{parentName:\"p\"},\"DATABASE_URL\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"SHADOW_DATABASE_URL\"),\" values come from your PlanetScale database and will be in the following form:\"),mdx(\"p\",null,mdx(\"inlineCode\",{parentName:\"p\"},\"mysql://\u003cuser\u003e@\u003caddress\u003e:\u003cport\u003e/\u003cdatabase\u003e\"),\" \"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"user\"),\" \",\"\\u2014\",\" the database user\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"address\"),\" \",\"\\u2014\",\" the local address returned in the previous step\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"port\"),\" \",\"\\u2014\",\" the port you specified in the previous step \"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"database\"),\" \",\"\\u2014\",\" the name of your database \")),mdx(\"p\",null,\"Below is an example of the \",mdx(\"inlineCode\",{parentName:\"p\"},\".env\"),\" file based on this tutorial:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-js\"}),`DATABASE_URL=\"mysql://root@127.0.0.1:3309/netlify-starter\"\nSHADOW_DATABASE_URL=\"mysql://root@127.0.0.1:3310/netlify-starter\"\nNEXTAUTH_URL=http://localhost:3000\n# Navigate to https://generate-secret.now.sh/32 to generate a secret for the variable below\nNEXTAUTH_SECRET=\n`)),mdx(\"p\",null,\"Remember, these are the values for your \",mdx(\"strong\",{parentName:\"p\"},\"local environment\"),\". The values needed for the Netlify environment variables will be covered shortly.\"),mdx(\"h2\",null,\"Migrate the database\"),mdx(\"p\",null,\"Now that your PlanetScale database is connected to your application, it's time to \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.prisma.io/docs/guides/database/developing-with-prisma-migrate\"}),\"run migrations\"),\" and seed the database with some sample users.\"),mdx(\"p\",null,\"In your terminal, run:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-bash\"}),`yarn db:migrate\n`)),mdx(\"p\",null,\"Name your migration \",mdx(\"inlineCode\",{parentName:\"p\"},\"initial-migration\"),\". This will create a new migration file under \",mdx(\"inlineCode\",{parentName:\"p\"},\"db/migrations\"),\".\"),mdx(\"p\",null,\"You can view the schema in your PlanetScale dashboard by clicking the \",mdx(\"inlineCode\",{parentName:\"p\"},\"netlify-starter\"),' database \u003e \"',mdx(\"strong\",{parentName:\"p\"},\"Branches\"),'\" \u003e ',mdx(\"inlineCode\",{parentName:\"p\"},\"main\"),' \u003e \"',mdx(\"strong\",{parentName:\"p\"},\"Schema\"),'\" \u003e \"',mdx(\"strong\",{parentName:\"p\"},\"Refresh schema\"),'\".'),mdx(\"p\",null,\"You'll now see the following tables:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"Account\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"Session\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"User\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"VerificationToken\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"_prisma_migrations\"))),mdx(\"p\",null,\"You can also verify it worked using the PlanetScale CLI. Run the following to start a MySQL shell (where \",mdx(\"inlineCode\",{parentName:\"p\"},\"netlify-starter\"),\" is your database):\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-bash\"}),`pscale shell netlify-starter main\n`)),mdx(\"p\",null,\"Once in the shell, view the tables with:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-bash\"}),`SHOW tables;\n`)),mdx(\"p\",null,\"Type \",mdx(\"inlineCode\",{parentName:\"p\"},\"exit\"),\" to exit the MySQL shell.\"),mdx(\"p\",null,\"The database schema, \",mdx(\"inlineCode\",{parentName:\"p\"},\"db/schema.prisma\"),\", has been loaded and your PlanetScale database is now ready for data.\"),mdx(\"h2\",null,\"Seed the database\"),mdx(\"p\",null,\"To seed the database, run the following:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-bash\"}),`yarn db:seed\n`)),mdx(\"p\",null,\"This will add three mock users to the \",mdx(\"inlineCode\",{parentName:\"p\"},\"User\"),\" database, as described in \",mdx(\"inlineCode\",{parentName:\"p\"},\"db/seed.ts\"),'. To verify that they were added, click on the \"',mdx(\"strong\",{parentName:\"p\"},\"Console\"),'\" tab in your PlanetScale dashboard on the ',mdx(\"inlineCode\",{parentName:\"p\"},\"main\"),\" branch of your \",mdx(\"inlineCode\",{parentName:\"p\"},\"netlify-starter\"),\" database.\"),mdx(\"p\",null,\"Run the following:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-bash\"}),`SELECT * from User;\n`)),mdx(\"p\",null,\"You can also run this command from the CLI using the same \",mdx(\"inlineCode\",{parentName:\"p\"},\"pscale shell\"),\" command mentioned above.\"),mdx(\"h2\",null,\"Netlify environment variables\"),mdx(\"p\",null,\"Now that you have your site running locally, let's shift back to the live Netlify site.\"),mdx(\"p\",null,`The final step in the site deployment is configuring your production environment variables. In the Netlify dashboard under your site's settings page, click on \"`,mdx(\"strong\",{parentName:\"p\"},\"Build \u0026 deploy\"),'\" \u003e \"',mdx(\"strong\",{parentName:\"p\"},\"Environment\"),'\" in the left nav.'),mdx(\"p\",null,'Click on the \"',mdx(\"strong\",{parentName:\"p\"},\"Edit variables\"),'\" button and enter in the following key/value pairs:'),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"DATABASE_URL\"),\" \",\"\\u2014\",\" To find this value, go back to your PlanetScale dashboard, click on the \",mdx(\"inlineCode\",{parentName:\"li\"},\"netlify-starter\"),\" database, and select the \",mdx(\"inlineCode\",{parentName:\"li\"},\"main\"),' branch under \"',mdx(\"strong\",{parentName:\"li\"},\"Branches\"),'\". Click on the \"',mdx(\"strong\",{parentName:\"li\"},\"Connect\"),'\" dropdown and then click the \"',mdx(\"strong\",{parentName:\"li\"},\"Generate new password\"),'\" button. Next, click on the \"',mdx(\"strong\",{parentName:\"li\"},\"General\"),'\"\" dropdown in that modal and select \"',mdx(\"strong\",{parentName:\"li\"},\"Prisma\"),'\". Copy the value for ',mdx(\"inlineCode\",{parentName:\"li\"},\"url\"),\" and paste that back in the Netlify dashboard as the value for \",mdx(\"inlineCode\",{parentName:\"li\"},\"DATABASE_URL\"),\". Be sure to save your PlanetScale password somewhere as you won't be able to access it again after closing the modal.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"NEXTAUTH_SECRET\"),\" \",\"\\u2014\",\" You may have already filled this out, but if not generate a new secret at \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://generate-secret.now.sh/32\"}),\"https://generate-secret.now.sh/32\"),\" and paste in the value that's returned.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"NEXTAUTH_URL\"),\" \",\"\\u2014\",\" Paste in the Netlify site name that was generated for you. For example, \",mdx(\"inlineCode\",{parentName:\"li\"},\"https://stoic-lumiere-6df10.netlify.app\"))),mdx(\"p\",null,'Click \"',mdx(\"strong\",{parentName:\"p\"},\"Save\"),'\". Now, redeploy the site with these new variables by going to \"Deploys\" in the top nav and clicking the \"',mdx(\"strong\",{parentName:\"p\"},\"Trigger deploy\"),'\" \u003e \"',mdx(\"strong\",{parentName:\"p\"},\"Deploy site\"),'\" button.'),mdx(\"h2\",null,\"Set up your admin account\"),mdx(\"p\",null,\"Now that your site is live and connected to your PlanetScale database, you need to set up your admin account for your application. Go to \",mdx(\"inlineCode\",{parentName:\"p\"},\"/admin/setup\"),\" on your live Netlify site (or locally if you didn't deploy), and fill in the form to set up your account. This will be automatically saved to your PlanetScale database.\"),mdx(\"p\",null,\"Creating an admin account gives you access to the \",mdx(\"inlineCode\",{parentName:\"p\"},\"/admin\"),\" route in your application, which is the dashboard to manage your users.\"),mdx(\"p\",null,\"Once you're signed in as an admin, navigate to \",mdx(\"inlineCode\",{parentName:\"p\"},\"/admin\"),\" to see a list of your users.\"),mdx(\"h2\",null,\"Customize and extend\"),mdx(\"p\",null,\"And that's it! If you followed this tutorial completely, you now have a local and production version of your \",mdx(\"strong\",{parentName:\"p\"},\"Next.js + PlanetScale + Prisma admin dashboard\"),\". So what's next?\"),mdx(\"p\",null,\"Now, it's time to extend it! Next.js Authentication is baked into this starter, so you can explore the \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://nextjs.org/docs/authentication\"}),\"Next.js docs to manage authentication\"),\" in your application.\"),mdx(\"p\",null,\"You also have a fully functional PlanetScale MySQL database built for scale using the power of \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://vitess.io/\"}),\"Vitess\"),\". You might have noticed that this tutorial uses the same database locally as it is in production. This was just for simplicity, but with PlanetScale, you can take advantage of our \",mdx(\"a\",e({parentName:\"p\"},{href:\"/concepts/branching\"}),\"powerful branching feature\"),\" to create development branches of your database specifically for testing locally. All you have to do is create a new branch and swap out the \",mdx(\"inlineCode\",{parentName:\"p\"},\"DATABASE_URL\"),\" environment variable in your local \",mdx(\"inlineCode\",{parentName:\"p\"},\".env\"),\" file.\"),mdx(\"p\",null,\"Finally, you have \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.prisma.io/docs/\"}),\"Prisma ORM\"),\" already configured in your application. If you want to add any more fields to your \",mdx(\"inlineCode\",{parentName:\"p\"},\"User\"),\" table or create any new tables, Prisma makes it easy with the \",mdx(\"inlineCode\",{parentName:\"p\"},\"schema.prisma\"),\" file. If you want to make any schema changes, it's a perfect time to try out the \",mdx(\"a\",e({parentName:\"p\"},{href:\"/concepts/branching\"}),\"PlanetScale branching feature\"),\". If you mess up, those changes won't touch production. And once you're satisfied with the changes, you can deploy to production without causing downtime thanks to PlanetScale's \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://docs.planetscale.com/concepts/nonblocking-schema-changes\"}),\"non-blocking schema changes\"),\".\"),mdx(\"p\",null,\"Hopefully this tutorial has been helpful. We'd love to hear how you're extending your starter application. \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://twitter.com/planetscaledata\"}),\"Tweet us @PlanetScaleData\"),\" and share what you built!\"),mdx(\"h2\",null,\"Need help?\"),mdx(\"p\",null,\"Get help from \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.planetscale.com/support\"}),\"PlanetScale's support team\"),\", or join our \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/planetscale/beta/discussions\"}),\"GitHub Discussion board\"),\" to see how others are using PlanetScale.\"))}MDXContent.isMDXComponent=!0;\n","scope":{}},"fields":{"slug":"tutorials/nextjs-planetscale-netlify-template","lastUpdatedOn":"2021-12-25T04:33:56.576Z"}},"__N_SSG":true},"page":"/[category]/[post]","query":{"category":"tutorials","post":"nextjs-planetscale-netlify-template"},"buildId":"ffRgkaqinJ87gnfSh8k4z","assetPrefix":"/docs","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>