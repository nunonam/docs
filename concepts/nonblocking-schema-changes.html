<!DOCTYPE html><html lang="en"><head><meta content="IE=edge" http-equiv="X-UA-Compatible"/><meta content="#262626" name="theme-color"/><link rel="mask-icon" href="/favicon.svg" color="#262626"/><script>!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics._writeKey="gURNntij37hKxpSUjda9znzNaOxZBG6H";;analytics.SNIPPET_VERSION="4.15.3";
analytics.load("gURNntij37hKxpSUjda9znzNaOxZBG6H");
analytics.page();
}}();</script><link rel="preload" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" as="style"/><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement;d.classList.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&false)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';d.classList.add('dark')}else{d.style.colorScheme = 'light';d.classList.add('light')}}else if(e){d.classList.add(e|| '')}else{d.classList.add('dark')}if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'dark'}catch(e){}}()</script><link rel="shortcut icon" href="/favicon_system.svg" sizes="any" type="image/svg+xml"/><title>Non-blocking schema changes - Documentation - ChattyCloud</title><meta name="msapplication-TileColor" content="#da532c"/><meta name="description" content="Non-blocking schema changes in PlanetScale provide a schema change workflow that allows users to update database tables without locking or causing downtime for production databases."/><meta property="og:url" content="https://docs.chatty-cloud.com/concepts/nonblocking-schema-changes"/><meta property="og:image" content="https://docs.chatty-cloud.com//img/internals/social_share.png"/><meta property="og:type" content="website"/><meta property="og:title" content="Non-blocking schema changes - Documentation - ChattyCloud"/><meta property="og:description" content="Non-blocking schema changes in PlanetScale provide a schema change workflow that allows users to update database tables without locking or causing downtime for production databases."/><meta name="twitter:url" content="https://docs.chatty-cloud.com/concepts/nonblocking-schema-changes"/><meta name="twitter:image" content="https://docs.chatty-cloud.com//img/internals/social_share.png"/><meta name="twitter:title" content="Non-blocking schema changes - Documentation - ChattyCloud"/><meta name="twitter:description" content="Non-blocking schema changes in PlanetScale provide a schema change workflow that allows users to update database tables without locking or causing downtime for production databases."/><script type="application/ld+json">{&quot;@context&quot;:&quot;http://schema.org&quot;,&quot;@type&quot;:&quot;Organization&quot;,&quot;name&quot;:&quot;ChattyCloud, Inc.&quot;,&quot;url&quot;:&quot;https://docs.chatty-cloud.com&quot;,&quot;sameAs&quot;:[&quot;https://twitter.com/&quot;],&quot;address&quot;:{&quot;@type&quot;:&quot;PostalAddress&quot;,&quot;streetAddress&quot;:&quot;321 Castro St #200&quot;,&quot;addressLocality&quot;:&quot;Mountain View&quot;,&quot;addressRegion&quot;:&quot;CA&quot;,&quot;postalCode&quot;:&quot;94041&quot;,&quot;addressCountry&quot;:&quot;US&quot;}}</script><meta name="next-head-count" content="18"/><link rel="preload" href="/docs/_next/static/css/d19452855f080e47.css" as="style"/><link rel="stylesheet" href="/docs/_next/static/css/d19452855f080e47.css" data-n-g=""/><link rel="preload" href="/docs/_next/static/css/6ed6fc696efb435c.css" as="style"/><link rel="stylesheet" href="/docs/_next/static/css/6ed6fc696efb435c.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/docs/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/docs/_next/static/chunks/webpack-21775410f7f02689.js" defer=""></script><script src="/docs/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/docs/_next/static/chunks/main-d78ee85becc0fade.js" defer=""></script><script src="/docs/_next/static/chunks/pages/_app-4f84c90584aacdb0.js" defer=""></script><script src="/docs/_next/static/chunks/217-13521f692b432699.js" defer=""></script><script src="/docs/_next/static/chunks/228-546d180dcfb89379.js" defer=""></script><script src="/docs/_next/static/chunks/476-5e8e8e79956619f9.js" defer=""></script><script src="/docs/_next/static/chunks/pages/%5Bcategory%5D/%5Bpost%5D-0dfa5a716bfbcb43.js" defer=""></script><script src="/docs/_next/static/-s0dJXBYWF7LmYhpsQySm/_buildManifest.js" defer=""></script><script src="/docs/_next/static/-s0dJXBYWF7LmYhpsQySm/_ssgManifest.js" defer=""></script><script src="/docs/_next/static/-s0dJXBYWF7LmYhpsQySm/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div><div class="h-full"><div class="flex flex-col mx-auto bg-primary text-primary"><a href="#content" class="absolute z-50 px-2 py-1 border-b border-r rounded-br -ml-96 focus:ml-0 bg-secondary">Skip to content</a><div class="relative z-40 w-full py-3 mx-auto border-b bg-primary text-primary"><div class="md:hidden duration-300 fixed z-30 inset-0 transition-opacity opacity-0 pointer-events-none" aria-hidden="true"><div class="absolute inset-0 bg-primary"></div></div><header class="relative z-50 grid items-center grid-cols-2 px-3 mx-auto md:grid-cols-3 md:grid-rows-1 max-w-7xl sm:px-6 lg:px-8"><div class="flex items-center col-start-1 row-start-1"><a class="rounded text-primary" aria-label="Go to documentation homepage" href="https://chatty-cloud.com"><svg width="41" height="32" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 41 32"><path fill="currentColor" d="M39.386 0l-7.238 7.403C29.378 3.05 24.594.18 19.177.18c-4.13 0-8.014 1.672-10.918 4.721-2.892 3.029-4.487 7.046-4.487 11.316 0 1.093.102 2.166.317 3.207a28.011 28.011 0 00-2.31 2.745c-1.85 2.566-2.26 4.49-1.217 5.71.154.189.634.694 1.564.778.082.01.154.01.235.01 1.493 0 3.343-1.125 5.48-3.354l16.978-17.32-1.186-1.23L7.38 23.345a13.864 13.864 0 01-1.932-7.119c0-3.817 1.421-7.403 4.007-10.106 2.587-2.713 6.042-4.206 9.722-4.206 4.957 0 9.312 2.692 11.745 6.73l-12.92 13.219c-.84.862-1.892 1.924-2.659 3.112-1.39 2.135-1.083 3.723-.777 4.47l.01.02c.358.831.972 1.494 1.78 1.936.92.494 1.85.567 2.79.599h.04a15.249 15.249 0 0010.959-4.637c2.934-2.987 4.549-6.983 4.549-11.232a16.2 16.2 0 00-1.666-7.182L40.57 1.23 39.386 0zM2.36 26.942h-.01c-.286 0-.43-.105-.47-.137l-.041-.052c-.327-.379-.164-1.504 1.288-3.534.49-.694 1.043-1.335 1.492-1.85.389 1.114.9 2.187 1.534 3.217-2.065 2.03-3.251 2.356-3.793 2.356zm26.598-.8c-2.596 2.65-6.072 4.123-9.762 4.133-.93-.031-1.503-.105-2.055-.41a2.277 2.277 0 01-1.022-1.093c-.409-1.052.307-2.335.634-2.84.675-1.04 1.656-2.04 2.443-2.839l12.573-12.85a14.529 14.529 0 011.247 5.899c-.02 3.786-1.451 7.34-4.058 10z"></path></svg></a><div class="flex items-center lg:text-lg font-medium pl-1.5"><a class="text-primary" href="/docs">Documentation</a></div></div><div class="col-start-1 col-span-2 md:col-span-1 pt-3 md:pt-0 row-start-3 md:col-start-2 md:row-start-1 md:flex hidden"><input type="search" class="w-full leading-[1.5rem] px-1.5 rounded ring-offset-0 border shadow-sm text-base py-sm focus-ring bg-secondary text-primary border-secondary" id="searchbox" placeholder="Search documentation"/></div><div class="col-start-1 col-span-2 md:col-span-1 row-start-2 pt-5 md:pt-0 md:row-start-1 md:col-start-3 md:justify-end md:flex hidden"><a href="https://dashboard.chatty-cloud.com" class="mr-2 box-border relative inline-flex items-center justify-center text-center no-underline leading-none whitespace-nowrap font-semibold rounded flex-shrink-0 transition select-none overflow-hidden focus-ring text-primary hover:bg-secondary focus:border-blue-500 border border-gray-200 dark:border-gray-600 bg-primary h-button py-1.5 px-2">dashboard</a></div><div class="relative z-50 flex justify-end col-start-2 row-start-1 align-center md:hidden"><button aria-label="Open navigation menu" class="flex appearance-none focus:outline-none"><span class="HamburgerMenu_menuWrapper__TCSWe" data-open="false"><span class="HamburgerMenu_menu__fxUil"></span></span></button></div></header><div class="relative z-40 w-full px-3 pt-3 sm:px-6 lg:px-8 sm:w-1/2 md:hidden hidden"><div class="mb-3"><strong class="block mb-1">Quick Start</strong><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/chattycloud-workflow">ChattyCloud workflow</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/branching">Branching</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/connection-strings">Connection strings</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/database-imports">Database imports</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/regions">Regions</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary bg-secondary !text-primary font-medium" href="/docs/concepts/nonblocking-schema-changes">Non-blocking schema changes</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/web-console">Web console</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/authentication-methods">Authentication methods</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/mfa">Multi-factor authentication</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/sso">Single sign-on</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/security">Security &amp; Compliance</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/access-control">Access control</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/audit-log">Audit log</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/security-log">Security log</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/query-statistics">Query statistics</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/billing">Billing</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/back-up-and-restore">Back up and restore</a></span></div><div class="mb-3"><strong class="block mb-1">Tutorials</strong><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/chattycloud-quick-start-guide">ChattyCloud quick start guide</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/connect-any-application">Connect any app</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/connect-rails-app">Connect a Rails app</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/connect-nodejs-app">Connect a Node.js app</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/nextjs-chattycloud-netlify-template">Next.js and Netlify Template</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/deploy-to-vercel">Deploy to Vercel</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/prisma-data-platform-integration">Prisma Data Platform integration</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/automatic-rails-migrations">Automatic Rails migrations</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/automatic-prisma-migrations">Automatic Prisma migrations</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/change-unique-key">Change single unique key</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/operating-without-foreign-keys">Operating without FK constraints</a></span></div><div class="mb-3"><strong class="block mb-1">Reference</strong><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/reference/chattycloud-environment-setup">ChattyCloud environment set up</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/reference/chattycloud-cli">ChattyCloud CLI</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/reference/secure-connections">Secure connections</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/reference/service-tokens">Service tokens</a></span></div><div class="flex items-stretch shadow-sm rounded text-primary inline-flex"><label class="flex items-center px-1.5 mb-0 font-medium border-t border-b border-l rounded-l bg-secondary border-secondary whitespace-nowrap text-sm py-1 h-button-sm">Theme</label><select class="inline-block pl-1.5 pr-4 py-0 border rounded shadow-sm bg-primary border-secondary focus-ring h-button-sm text-sm block w-full pl-2 rounded-l-none rounded-r !shadow-none"><option value="light">Light</option><option value="dark">Dark</option><option value="system">System</option></select></div></div></div><main class="flex flex-col flex-1 w-full px-3 py-4 mx-auto bg-primary md:py-8 max-w-7xl sm:px-6 lg:px-8"><div class="flex flex-col h-full md:flex-row"><div class="flex-shrink-0 hidden w-full md:block md:w-1/3 md:pr-4 lg:pr-8 xl:pr-12"><div class="mb-3"><strong class="block mb-1">Quick Start</strong><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/chattycloud-workflow">ChattyCloud workflow</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/branching">Branching</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/connection-strings">Connection strings</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/database-imports">Database imports</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/regions">Regions</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary bg-secondary !text-primary font-medium" href="/docs/concepts/nonblocking-schema-changes">Non-blocking schema changes</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/web-console">Web console</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/authentication-methods">Authentication methods</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/mfa">Multi-factor authentication</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/sso">Single sign-on</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/security">Security &amp; Compliance</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/access-control">Access control</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/audit-log">Audit log</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/security-log">Security log</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/query-statistics">Query statistics</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/billing">Billing</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/concepts/back-up-and-restore">Back up and restore</a></span></div><div class="mb-3"><strong class="block mb-1">Tutorials</strong><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/chattycloud-quick-start-guide">ChattyCloud quick start guide</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/connect-any-application">Connect any app</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/connect-rails-app">Connect a Rails app</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/connect-nodejs-app">Connect a Node.js app</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/nextjs-chattycloud-netlify-template">Next.js and Netlify Template</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/deploy-to-vercel">Deploy to Vercel</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/prisma-data-platform-integration">Prisma Data Platform integration</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/automatic-rails-migrations">Automatic Rails migrations</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/automatic-prisma-migrations">Automatic Prisma migrations</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/change-unique-key">Change single unique key</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/tutorials/operating-without-foreign-keys">Operating without FK constraints</a></span></div><div class="mb-3"><strong class="block mb-1">Reference</strong><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/reference/chattycloud-environment-setup">ChattyCloud environment set up</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/reference/chattycloud-cli">ChattyCloud CLI</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/reference/secure-connections">Secure connections</a></span><span class="block -ml-1.5"><a class="px-1.5 rounded-sm block leading-loose py-0.5 text-secondary hover:text-primary hover:bg-secondary" href="/docs/reference/service-tokens">Service tokens</a></span></div><div class="flex items-stretch shadow-sm rounded text-primary inline-flex"><label class="flex items-center px-1.5 mb-0 font-medium border-t border-b border-l rounded-l bg-secondary border-secondary whitespace-nowrap text-sm py-1 h-button-sm">Theme</label><select class="inline-block pl-1.5 pr-4 py-0 border rounded shadow-sm bg-primary border-secondary focus-ring h-button-sm text-sm block w-full pl-2 rounded-l-none rounded-r !shadow-none"><option value="light">Light</option><option value="dark">Dark</option><option value="system">System</option></select></div></div><div class="relative flex-1 min-w-0"><div class="mdx-content"><div class="mb-4"><h1 class="mb-1 text-4xl font-semibold">Non-blocking schema changes</h1><p class="text-xl text-secondary">Non-blocking schema changes in PlanetScale provide a schema change workflow that allows users to update database tables without locking or causing downtime for production databases.</p></div><div><a class="text-primary" href="#overview"><h1 class="font-semibold text-xl mb-2 mt-3" as="h2" id="overview">Overview</h1></a><div class="my-4 border mb-3 px-3 py-2.5 rounded bg-purple-50 dark:bg-purple-900 border-purple-100 dark:border-purple-800"> <!-- --> <strong>Tip</strong><div class="mt-1 info-block">To make non-blocking schema changes in PlanetScale, you&#x27;ll first need a basic understanding of<!-- --> <a href="https://docs.planetscale.com/concepts/branching">branching</a>, the core PlanetScale feature that provide schema changes. Our branching concepts page is a great place to start.</div></div> <p><strong>Non-blocking schema changes</strong> in PlanetScale provide a schema change workflow that allows users to update database tables without locking or causing downtime for production databases.</p><p>PlanetScale makes it safe to deploy schema changes to production databases via <em>development</em> and <em>production branches</em>. Production (<code>main</code>) branches cannot be deleted and can only be updated using deploy requests. Development branches are a separate database with a copy of the <code>main</code> branch&#x27;s schema. Developers can make schema changes in development branches, test locally, and open a deploy request for deploying their changes to the production database.</p><p>Developers can also comment on deploy requests and request reviewers to approve a deploy request before its schema changes can deploy into the <code>main</code> database branch. Currently, requiring approval is a per-database setting is turned off by default. With the setting turned off, developers do not need approval to merge a deploy request.</p><a class="text-primary" href="#adding-columns-to-large-tables-with-planetscale-is-safe!"><h1 class="font-semibold text-xl mb-2 mt-3" as="h2" id="adding-columns-to-large-tables-with-planetscale-is-safe!">Adding columns to large tables with PlanetScale is safe!</h1></a><p><em>Create</em>, <em>drop</em>, and <em>alter</em> statements, also known as Data Definition Language (DDL), are used for making schema changes in a database table.</p><p>PlanetScale enables developers to make schema changes without the fear of dropping columns, locking tables, causing downtime in their app, etc. PlanetScale also prevents schema changes with conflicts from being migrated and handles schema changes from multiple teammates. A user doesn&#x27;t have to wait to find out if their changes will be rejected, they learn as they add the change to the queue.</p><a class="text-primary" href="#how-do-i-make-non-blocking-schema-changes-with-planetscale?"><h1 class="font-semibold text-xl mb-2 mt-3" as="h2" id="how-do-i-make-non-blocking-schema-changes-with-planetscale?">How do I make non-blocking schema changes with PlanetScale?</h1></a><p>All PlanetScale schema changes must occur on a database branch. <em>(A database branch is a separate database with a copy of the <code>main</code> branch&#x27;s schema.)</em></p><p>At a high level, this is what happens during the <em>non-blocking schema change</em> process in PlanetScale:</p><ol><li>You create a database branch.</li><li>You test your changes on this branch before attempting to apply the changes to the <code>main</code> branch. <em>(i.e., You made some changes to the database you wish to deploy to the production database.)</em></li><li>You open a request to deploy your changes to <code>main</code>.</li><li>PlanetScale verifies that your schema changes are safe to be deployed to production. If there are any issues or schema conflicts, you&#x27;ll be shown the errors.</li></ol><p>When you hit deploy, it doesn&#x27;t mean that PlanetScale can immediately apply your schema changes to the production database. After all, there may be a current running deployment from a previous user or even from yourself. The latest deployment request automatically yields to production traffic and gets added to a deployment queue in these situations.</p><ol start="5"><li>Your deployment makes it to the <code>main</code> branch <em>(i.e., production)</em>, and you can now see your schema changes in the production database.</li></ol><div class="my-4 border mb-3 px-3 py-2.5 rounded bg-blue-50 dark:bg-blue-900 border-blue-100 dark:border-blue-800"><strong>Note</strong> <!-- --> <div class="mt-1 info-block">PlanetScale makes sure not to exhaust your resources; the deployment may be throttled to avoid any impact on production queries.</div></div> <p><span class="block mt-3"><img src="/img/docs/ps_nbsc_diagram_light.png" alt="PlanetScale non-blocking schema changes diagram" class="max-h-[600px] mx-auto"/><span class="block mt-1 mb-4 text-sm text-center text-secondary">PlanetScale non-blocking schema changes diagram</span></span></p><a class="text-primary" href="#planetscale-workflow"><h1 class="font-semibold text-xl mb-2 mt-3" as="h2" id="planetscale-workflow">PlanetScale workflow</h1></a><p>The PlanetScale command-line tool (CLI) runs an interactive shell equipped with many commands designed to make the database management workflow easier for developers.</p><p>A basic non-blocking schema change workflow in PlanetScale might look like this:</p><ol><li>Create a database:</li></ol><pre><div class="max-w-full mt-2 mb-4 border rounded"><div class="flex items-center justify-between px-2 border-b rounded-t py-sm bg-secondary"><span class="font-sans text-secondary"></span><div class="relative inline-flex"><button aria-label="Copy snippet" title="Copy snippet" type="button" class="undefined h-[32px] h-button px-1 focus-visible-ring"></button><div class="font-sans pointer-events-none transition absolute z-10 px-1 text-white font-semibold dark:bg-gray-50 dark:text-gray-900 text-sm transform -translate-x-1/2 bg-gray-900 rounded shadow-lg py-sm left-1/2 top-1/2 opacity-0">Copied</div></div></div><div class="w-full p-2 overflow-x-auto"><div><div class="token-line" style="color:#9a86fd"><span class="token plain">pscale database create &lt;database&gt;</span></div></div></div></div></pre><ol start="2"><li>Create a development branch:</li></ol><pre><div class="max-w-full mt-2 mb-4 border rounded"><div class="flex items-center justify-between px-2 border-b rounded-t py-sm bg-secondary"><span class="font-sans text-secondary"></span><div class="relative inline-flex"><button aria-label="Copy snippet" title="Copy snippet" type="button" class="undefined h-[32px] h-button px-1 focus-visible-ring"></button><div class="font-sans pointer-events-none transition absolute z-10 px-1 text-white font-semibold dark:bg-gray-50 dark:text-gray-900 text-sm transform -translate-x-1/2 bg-gray-900 rounded shadow-lg py-sm left-1/2 top-1/2 opacity-0">Copied</div></div></div><div class="w-full p-2 overflow-x-auto"><div><div class="token-line" style="color:#9a86fd"><span class="token plain">pscale branch create &lt;database&gt; &lt;branch&gt;</span></div></div></div></div></pre><ol start="3"><li>Make a schema change on this branch:</li></ol><pre><div class="max-w-full mt-2 mb-4 border rounded"><div class="flex items-center justify-between px-2 border-b rounded-t py-sm bg-secondary"><span class="font-sans text-secondary"></span><div class="relative inline-flex"><button aria-label="Copy snippet" title="Copy snippet" type="button" class="undefined h-[32px] h-button px-1 focus-visible-ring"></button><div class="font-sans pointer-events-none transition absolute z-10 px-1 text-white font-semibold dark:bg-gray-50 dark:text-gray-900 text-sm transform -translate-x-1/2 bg-gray-900 rounded shadow-lg py-sm left-1/2 top-1/2 opacity-0">Copied</div></div></div><div class="w-full p-2 overflow-x-auto"><div><div class="token-line" style="color:#9a86fd"><span class="token plain">pscale shell &lt;database&gt; &lt;branch&gt;</span></div></div></div></div></pre><div class="my-4 border mb-3 px-3 py-2.5 rounded bg-purple-50 dark:bg-purple-900 border-purple-100 dark:border-purple-800"> <!-- --> <strong>Tip</strong><div class="mt-1 info-block">A schema change is any change you make to the tables in your database environment created within the PlanetScale branch. (i.e., create, drop, and alter statements )</div></div> <div class="my-4 border mb-3 px-3 py-2.5 rounded border-yellow-200 bg-yellow-50 dark:border-yellow-500 dark:bg-yellow-900"> <strong>Warning</strong> <div class="mt-1 info-block">You can only apply direct schema changes to the development branch, not to `main`.</div></div> <p>Here is a sample CREATE table schema change you could try using:</p><pre><div class="max-w-full mt-2 mb-4 border rounded"><div class="flex items-center justify-between px-2 border-b rounded-t py-sm bg-secondary"><span class="font-sans text-secondary"></span><div class="relative inline-flex"><button aria-label="Copy snippet" title="Copy snippet" type="button" class="undefined h-[32px] h-button px-1 focus-visible-ring"></button><div class="font-sans pointer-events-none transition absolute z-10 px-1 text-white font-semibold dark:bg-gray-50 dark:text-gray-900 text-sm transform -translate-x-1/2 bg-gray-900 rounded shadow-lg py-sm left-1/2 top-1/2 opacity-0">Copied</div></div></div><div class="w-full p-2 overflow-x-auto"><div><div class="token-line" style="color:#9a86fd"><span class="token plain">CREATE TABLE `reminders` (</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  `id` bigint NOT NULL AUTO_INCREMENT,</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  `body` varchar(1024) NOT NULL,</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  `created_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  `updated_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  `is_done` tinyint(1) NOT NULL DEFAULT &#x27;0&#x27;,</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">  PRIMARY KEY (`id`)</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;</span></div></div></div></div></pre><ol start="4"><li><p>Test changes on branch locally.</p></li><li><p>Create a deployment request by running:</p></li></ol><pre><div class="max-w-full mt-2 mb-4 border rounded"><div class="flex items-center justify-between px-2 border-b rounded-t py-sm bg-secondary"><span class="font-sans text-secondary"></span><div class="relative inline-flex"><button aria-label="Copy snippet" title="Copy snippet" type="button" class="undefined h-[32px] h-button px-1 focus-visible-ring"></button><div class="font-sans pointer-events-none transition absolute z-10 px-1 text-white font-semibold dark:bg-gray-50 dark:text-gray-900 text-sm transform -translate-x-1/2 bg-gray-900 rounded shadow-lg py-sm left-1/2 top-1/2 opacity-0">Copied</div></div></div><div class="w-full p-2 overflow-x-auto"><div><div class="token-line" style="color:#9a86fd"><span class="token plain">pscale deploy-request create &lt;database&gt; &lt;branch&gt;</span></div></div></div></div></pre><ol start="6"><li>Fix any schema conflicts.</li></ol><p>PlanetScale displays the difference between what is currently in the <code>main</code> branch and your branch. Go back to <em>Step 3</em> of the workflow and test out new schema changes to fix the schema conflict. If you did not encounter any schema conflicts, you&#x27;re ready for <em>Step 7</em>.</p><ol start="7"><li>Deploy the deploy request.</li></ol><ul><li>To <em>deploy</em> the <strong>deploy request</strong> created in <em>Step 5</em>, run the following command:</li></ul><pre><div class="max-w-full mt-2 mb-4 border rounded"><div class="flex items-center justify-between px-2 border-b rounded-t py-sm bg-secondary"><span class="font-sans text-secondary"></span><div class="relative inline-flex"><button aria-label="Copy snippet" title="Copy snippet" type="button" class="undefined h-[32px] h-button px-1 focus-visible-ring"></button><div class="font-sans pointer-events-none transition absolute z-10 px-1 text-white font-semibold dark:bg-gray-50 dark:text-gray-900 text-sm transform -translate-x-1/2 bg-gray-900 rounded shadow-lg py-sm left-1/2 top-1/2 opacity-0">Copied</div></div></div><div class="w-full p-2 overflow-x-auto"><div><div class="token-line" style="color:#9a86fd"><span class="token plain">pscale deploy-request deploy &lt;database&gt; &lt;deploy-request-number&gt;</span></div></div></div></div></pre><ul><li>To find your <code>deploy-request-number</code>, simply run:</li></ul><pre><div class="max-w-full mt-2 mb-4 border rounded"><div class="flex items-center justify-between px-2 border-b rounded-t py-sm bg-secondary"><span class="font-sans text-secondary"></span><div class="relative inline-flex"><button aria-label="Copy snippet" title="Copy snippet" type="button" class="undefined h-[32px] h-button px-1 focus-visible-ring"></button><div class="font-sans pointer-events-none transition absolute z-10 px-1 text-white font-semibold dark:bg-gray-50 dark:text-gray-900 text-sm transform -translate-x-1/2 bg-gray-900 rounded shadow-lg py-sm left-1/2 top-1/2 opacity-0">Copied</div></div></div><div class="w-full p-2 overflow-x-auto"><div><div class="token-line" style="color:#9a86fd"><span class="token plain">pscale deploy-request list &lt;database&gt;</span></div></div></div></div></pre><p>Copy the value from <code>NUMBER</code> and use that digit as your <code>deploy-request-number</code>.</p><a class="text-primary" href="#limitations"><h1 class="font-semibold text-xl mb-2 mt-3" as="h2" id="limitations">Limitations</h1></a><p>PlanetScale doesn&#x27;t support <code>FOREIGN KEY</code> constraints. Learn why and how to operate without foreign keys constraints in <a href="/tutorials/operating-without-foreign-keys">this tutorial</a>.</p><a class="text-primary" href="#need-help?"><h1 class="font-semibold text-xl mb-2 mt-3" as="h2" id="need-help?">Need help?</h1></a><p>Get help from <a href="https://www.planetscale.com/support">PlanetScale&#x27;s support team</a>, or join our <a href="https://github.com/planetscale/beta/discussions">GitHub Discussion board</a> to see how others are using PlanetScale.</p><div class="bg-secondary px-3 pt-2 rounded border mt-4 mb-4"><h1 class="font-semibold mb-1">Next steps</h1><ul class="list-disc list-inside"><li class="py-sm"><a class="font-medium" href="/docs/concepts/branching">Branching</a></li></ul></div></div><div class="flex items-center mt-4 mb-4"><strong class="mr-1">Was this page useful?</strong><button type="button" class="mr-1 box-border relative inline-flex items-center justify-center text-center no-underline leading-none whitespace-nowrap font-semibold rounded flex-shrink-0 transition select-none overflow-hidden focus-ring text-primary hover:bg-secondary focus:border-blue-500 border border-gray-200 dark:border-gray-600 bg-primary text-sm py-sm px-1">Yes</button><button type="button" class="box-border relative inline-flex items-center justify-center text-center no-underline leading-none whitespace-nowrap font-semibold rounded flex-shrink-0 transition select-none overflow-hidden focus-ring text-primary hover:bg-secondary focus:border-blue-500 border border-gray-200 dark:border-gray-600 bg-primary text-sm py-sm px-1">No</button></div><div class="flex flex-col sm:flex-row sm:items-center justify-between pb-4 border-b mb-4"><div class="text-secondary mb-1 sm:mb-0">Last updated on <!-- -->December<!-- --> <!-- -->25<!-- -->, <!-- -->2021</div><a href="https://github.com/chattycloud/docs/blob/main/content/docs/concepts/nonblocking-schema-changes.mdx">Help us improve this page</a></div></div><div class="mt-4 flex items-center justify-between"><span><a class="mr-1.5 text-secondary hover:text-blue" href="https://www.chatty-cloud.com/legal/privacy">Privacy</a><a class="text-secondary hover:text-blue" href="https://www.chatty-cloud.com/legal/siteterms">Terms</a></span><span class="text-secondary">© 2021 ChattyCloud Inc.</span></div></div></div></main></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"title":"Non-blocking schema changes","subtitle":"Non-blocking schema changes in PlanetScale provide a schema change workflow that allows users to update database tables without locking or causing downtime for production databases."},"headings":[{"depth":2,"value":"Overview"},{"depth":2,"value":"Adding columns to large tables with PlanetScale is safe!"},{"depth":2,"value":"How do I make non-blocking schema changes with PlanetScale?"},{"depth":2,"value":"PlanetScale workflow"},{"depth":2,"value":"Limitations"},{"depth":2,"value":"Need help?"}],"body":{"compiledSource":"var d=Object.defineProperty,m=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var r=Object.getOwnPropertySymbols;var l=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;var s=(e,t,n)=\u003et in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a=(e,t)=\u003e{for(var n in t||(t={}))l.call(t,n)\u0026\u0026s(e,n,t[n]);if(r)for(var n of r(t))i.call(t,n)\u0026\u0026s(e,n,t[n]);return e},p=(e,t)=\u003em(e,h(t));var c=(e,t)=\u003e{var n={};for(var o in e)l.call(e,o)\u0026\u0026t.indexOf(o)\u003c0\u0026\u0026(n[o]=e[o]);if(e!=null\u0026\u0026r)for(var o of r(e))t.indexOf(o)\u003c0\u0026\u0026i.call(e,o)\u0026\u0026(n[o]=e[o]);return n};const makeShortcode=e=\u003efunction(n){return console.warn(\"Component \"+e+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",a({},n))},InfoBlock=makeShortcode(\"InfoBlock\"),NextBlock=makeShortcode(\"NextBlock\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var o=n,{components:e}=o,t=c(o,[\"components\"]);return mdx(MDXLayout,p(a(a({},layoutProps),t),{components:e,mdxType:\"MDXLayout\"}),mdx(\"h2\",null,\"Overview\"),mdx(InfoBlock,{type:\"tip\",mdxType:\"InfoBlock\"},\"To make non-blocking schema changes in PlanetScale, you'll first need a basic understanding of\",\" \",mdx(\"a\",{href:\"https://docs.planetscale.com/concepts/branching\"},\"branching\"),\", the core PlanetScale feature that provide schema changes. Our branching concepts page is a great place to start.\"),\" \",mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"Non-blocking schema changes\"),\" in PlanetScale provide a schema change workflow that allows users to update database tables without locking or causing downtime for production databases.\"),mdx(\"p\",null,\"PlanetScale makes it safe to deploy schema changes to production databases via \",mdx(\"em\",{parentName:\"p\"},\"development\"),\" and \",mdx(\"em\",{parentName:\"p\"},\"production branches\"),\". Production (\",mdx(\"inlineCode\",{parentName:\"p\"},\"main\"),\") branches cannot be deleted and can only be updated using deploy requests. Development branches are a separate database with a copy of the \",mdx(\"inlineCode\",{parentName:\"p\"},\"main\"),\" branch's schema. Developers can make schema changes in development branches, test locally, and open a deploy request for deploying their changes to the production database.\"),mdx(\"p\",null,\"Developers can also comment on deploy requests and request reviewers to approve a deploy request before its schema changes can deploy into the \",mdx(\"inlineCode\",{parentName:\"p\"},\"main\"),\" database branch. Currently, requiring approval is a per-database setting is turned off by default. With the setting turned off, developers do not need approval to merge a deploy request.\"),mdx(\"h2\",null,\"Adding columns to large tables with PlanetScale is safe!\"),mdx(\"p\",null,mdx(\"em\",{parentName:\"p\"},\"Create\"),\", \",mdx(\"em\",{parentName:\"p\"},\"drop\"),\", and \",mdx(\"em\",{parentName:\"p\"},\"alter\"),\" statements, also known as Data Definition Language (DDL), are used for making schema changes in a database table.\"),mdx(\"p\",null,\"PlanetScale enables developers to make schema changes without the fear of dropping columns, locking tables, causing downtime in their app, etc. PlanetScale also prevents schema changes with conflicts from being migrated and handles schema changes from multiple teammates. A user doesn't have to wait to find out if their changes will be rejected, they learn as they add the change to the queue.\"),mdx(\"h2\",null,\"How do I make non-blocking schema changes with PlanetScale?\"),mdx(\"p\",null,\"All PlanetScale schema changes must occur on a database branch. \",mdx(\"em\",{parentName:\"p\"},\"(A database branch is a separate database with a copy of the \",mdx(\"inlineCode\",{parentName:\"em\"},\"main\"),\" branch's schema.)\")),mdx(\"p\",null,\"At a high level, this is what happens during the \",mdx(\"em\",{parentName:\"p\"},\"non-blocking schema change\"),\" process in PlanetScale:\"),mdx(\"ol\",null,mdx(\"li\",{parentName:\"ol\"},\"You create a database branch.\"),mdx(\"li\",{parentName:\"ol\"},\"You test your changes on this branch before attempting to apply the changes to the \",mdx(\"inlineCode\",{parentName:\"li\"},\"main\"),\" branch. \",mdx(\"em\",{parentName:\"li\"},\"(i.e., You made some changes to the database you wish to deploy to the production database.)\")),mdx(\"li\",{parentName:\"ol\"},\"You open a request to deploy your changes to \",mdx(\"inlineCode\",{parentName:\"li\"},\"main\"),\".\"),mdx(\"li\",{parentName:\"ol\"},\"PlanetScale verifies that your schema changes are safe to be deployed to production. If there are any issues or schema conflicts, you'll be shown the errors.\")),mdx(\"p\",null,\"When you hit deploy, it doesn't mean that PlanetScale can immediately apply your schema changes to the production database. After all, there may be a current running deployment from a previous user or even from yourself. The latest deployment request automatically yields to production traffic and gets added to a deployment queue in these situations.\"),mdx(\"ol\",a({},{start:5}),mdx(\"li\",{parentName:\"ol\"},\"Your deployment makes it to the \",mdx(\"inlineCode\",{parentName:\"li\"},\"main\"),\" branch \",mdx(\"em\",{parentName:\"li\"},\"(i.e., production)\"),\", and you can now see your schema changes in the production database.\")),mdx(InfoBlock,{type:\"note\",mdxType:\"InfoBlock\"},\"PlanetScale makes sure not to exhaust your resources; the deployment may be throttled to avoid any impact on production queries.\"),\" \",mdx(\"p\",null,mdx(\"img\",a({parentName:\"p\"},{src:\"/img/docs/ps_nbsc_diagram_light.png\",alt:\"PlanetScale non-blocking schema changes diagram\"}))),mdx(\"h2\",null,\"PlanetScale workflow\"),mdx(\"p\",null,\"The PlanetScale command-line tool (CLI) runs an interactive shell equipped with many commands designed to make the database management workflow easier for developers.\"),mdx(\"p\",null,\"A basic non-blocking schema change workflow in PlanetScale might look like this:\"),mdx(\"ol\",null,mdx(\"li\",{parentName:\"ol\"},\"Create a database:\")),mdx(\"pre\",null,mdx(\"code\",a({parentName:\"pre\"},{}),` pscale database create \u003cdatabase\u003e\n`)),mdx(\"ol\",a({},{start:2}),mdx(\"li\",{parentName:\"ol\"},\"Create a development branch:\")),mdx(\"pre\",null,mdx(\"code\",a({parentName:\"pre\"},{}),`pscale branch create \u003cdatabase\u003e \u003cbranch\u003e\n`)),mdx(\"ol\",a({},{start:3}),mdx(\"li\",{parentName:\"ol\"},\"Make a schema change on this branch:\")),mdx(\"pre\",null,mdx(\"code\",a({parentName:\"pre\"},{}),`    pscale shell \u003cdatabase\u003e \u003cbranch\u003e\n`)),mdx(InfoBlock,{type:\"tip\",mdxType:\"InfoBlock\"},\"A schema change is any change you make to the tables in your database environment created within the PlanetScale branch. (i.e., create, drop, and alter statements )\"),\" \",mdx(InfoBlock,{type:\"warning\",mdxType:\"InfoBlock\"},\"You can only apply direct schema changes to the development branch, not to `main`.\"),\" \",mdx(\"p\",null,\"Here is a sample CREATE table schema change you could try using:\"),mdx(\"pre\",null,mdx(\"code\",a({parentName:\"pre\"},{className:\"language-sql\"}),\"CREATE TABLE `reminders` (\\n  `id` bigint NOT NULL AUTO_INCREMENT,\\n  `body` varchar(1024) NOT NULL,\\n  `created_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\\n  `updated_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\\n  `is_done` tinyint(1) NOT NULL DEFAULT '0',\\n  PRIMARY KEY (`id`)\\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;\\n\")),mdx(\"ol\",a({},{start:4}),mdx(\"li\",{parentName:\"ol\"},mdx(\"p\",{parentName:\"li\"},\"Test changes on branch locally.\")),mdx(\"li\",{parentName:\"ol\"},mdx(\"p\",{parentName:\"li\"},\"Create a deployment request by running:\"))),mdx(\"pre\",null,mdx(\"code\",a({parentName:\"pre\"},{}),`pscale deploy-request create \u003cdatabase\u003e \u003cbranch\u003e\n`)),mdx(\"ol\",a({},{start:6}),mdx(\"li\",{parentName:\"ol\"},\"Fix any schema conflicts.\")),mdx(\"p\",null,\"PlanetScale displays the difference between what is currently in the \",mdx(\"inlineCode\",{parentName:\"p\"},\"main\"),\" branch and your branch. Go back to \",mdx(\"em\",{parentName:\"p\"},\"Step 3\"),\" of the workflow and test out new schema changes to fix the schema conflict. If you did not encounter any schema conflicts, you're ready for \",mdx(\"em\",{parentName:\"p\"},\"Step 7\"),\".\"),mdx(\"ol\",a({},{start:7}),mdx(\"li\",{parentName:\"ol\"},\"Deploy the deploy request.\")),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"To \",mdx(\"em\",{parentName:\"li\"},\"deploy\"),\" the \",mdx(\"strong\",{parentName:\"li\"},\"deploy request\"),\" created in \",mdx(\"em\",{parentName:\"li\"},\"Step 5\"),\", run the following command:\")),mdx(\"pre\",null,mdx(\"code\",a({parentName:\"pre\"},{}),`pscale deploy-request deploy \u003cdatabase\u003e \u003cdeploy-request-number\u003e\n`)),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"To find your \",mdx(\"inlineCode\",{parentName:\"li\"},\"deploy-request-number\"),\", simply run:\")),mdx(\"pre\",null,mdx(\"code\",a({parentName:\"pre\"},{}),`pscale deploy-request list \u003cdatabase\u003e\n`)),mdx(\"p\",null,\"Copy the value from \",mdx(\"inlineCode\",{parentName:\"p\"},\"NUMBER\"),\" and use that digit as your \",mdx(\"inlineCode\",{parentName:\"p\"},\"deploy-request-number\"),\".\"),mdx(\"h2\",null,\"Limitations\"),mdx(\"p\",null,\"PlanetScale doesn't support \",mdx(\"inlineCode\",{parentName:\"p\"},\"FOREIGN KEY\"),\" constraints. Learn why and how to operate without foreign keys constraints in \",mdx(\"a\",a({parentName:\"p\"},{href:\"/tutorials/operating-without-foreign-keys\"}),\"this tutorial\"),\".\"),mdx(\"h2\",null,\"Need help?\"),mdx(\"p\",null,\"Get help from \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://www.planetscale.com/support\"}),\"PlanetScale's support team\"),\", or join our \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://github.com/planetscale/beta/discussions\"}),\"GitHub Discussion board\"),\" to see how others are using PlanetScale.\"),mdx(NextBlock,{steps:[{text:\"Branching\",link:\"/concepts/branching\"}],mdxType:\"NextBlock\"}))}MDXContent.isMDXComponent=!0;\n","scope":{}},"fields":{"slug":"concepts/nonblocking-schema-changes","lastUpdatedOn":"2021-12-25T02:34:04.855Z"}},"__N_SSG":true},"page":"/[category]/[post]","query":{"category":"concepts","post":"nonblocking-schema-changes"},"buildId":"-s0dJXBYWF7LmYhpsQySm","assetPrefix":"/docs","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>