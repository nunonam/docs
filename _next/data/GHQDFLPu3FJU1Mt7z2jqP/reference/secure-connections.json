{"pageProps":{"frontmatter":{"title":"Connecting to PlanetScale securely","subtitle":"How to connect to PlanetScale securely when using connection strings."},"headings":[{"depth":2,"value":"Connecting to PlanetScale securely"},{"depth":2,"value":"MySQL command line client"},{"depth":2,"value":"libmysqlclient based clients"},{"depth":2,"value":"Certificate Authorities"},{"depth":3,"value":"What is a Certificate Authority (CA)?"},{"depth":3,"value":"Why is a Certificate Authority (CA) needed for TLS / SSL?"},{"depth":3,"value":"What is a CA root store?"},{"depth":3,"value":"Why do I need to care about a CA when connecting to PlanetScale?"},{"depth":3,"value":"CA root configuration"},{"depth":2,"value":"Need help?"}],"body":{"compiledSource":"var p=Object.defineProperty,d=Object.defineProperties;var u=Object.getOwnPropertyDescriptors;var n=Object.getOwnPropertySymbols;var r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;var c=(t,o,a)=>o in t?p(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,e=(t,o)=>{for(var a in o||(o={}))r.call(o,a)&&c(t,a,o[a]);if(n)for(var a of n(o))s.call(o,a)&&c(t,a,o[a]);return t},h=(t,o)=>d(t,u(o));var l=(t,o)=>{var a={};for(var i in t)r.call(t,i)&&o.indexOf(i)<0&&(a[i]=t[i]);if(t!=null&&n)for(var i of n(t))o.indexOf(i)<0&&s.call(t,i)&&(a[i]=t[i]);return a};const makeShortcode=t=>function(a){return console.warn(\"Component \"+t+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",e({},a))},InfoBlock=makeShortcode(\"InfoBlock\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(a){var i=a,{components:t}=i,o=l(i,[\"components\"]);return mdx(MDXLayout,h(e(e({},layoutProps),o),{components:t,mdxType:\"MDXLayout\"}),mdx(\"h2\",null,\"Connecting to PlanetScale securely\"),mdx(\"p\",null,\"When you are using passwords to connect to PlanetScale, it is essential to correctly validate the server side certificate that PlanetScale provides. If you don't configure it properly, your connection will be vulnerable to man-in-the-middle attacks. The server certificates that PlanetScale uses are signed by a commonly available system root. How to configure this properly depends on the client you are using to connect to MySQL.\"),mdx(InfoBlock,{type:\"note\",mdxType:\"InfoBlock\"},\"We don't guarantee we will continue to sign our certificates using the same CA. We reserve the right to change our CA but guarantee that we will use one that is provided on all common systems by default.\"),mdx(\"h2\",null,\"MySQL command line client\"),mdx(\"p\",null,\"With the MySQL command line client, you need to use the \",mdx(\"inlineCode\",{parentName:\"p\"},\"VERIFY_IDENTITY\"),\" mode and provide the path to the system roots on your system. The examples below use the most common Linux configuration, but the path might be different in your case. Please check the \",mdx(\"a\",e({parentName:\"p\"},{href:\"#ca-root-configuration\"}),\"CA root configuration\"),\" below to find the appropriate path for your operating system and distribution.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`mysql --ssl-mode=VERIFY_IDENTITY --ssl-ca=/etc/ssl/certs/ca-certificates.crt\n`)),mdx(\"h2\",null,\"libmysqlclient based clients\"),mdx(\"p\",null,\"Many clients are based on \",mdx(\"inlineCode\",{parentName:\"p\"},\"libmysqlclient\"),\". These clients require configuration options similar to the command line MySQL client, as they are using the same driver to connect to PlanetScale. Please reference the documentation of the driver that you are using for how to configure the SSL CA path. The value provided can be found in the \",mdx(\"a\",e({parentName:\"p\"},{href:\"#ca-root-configuration\"}),\"CA root configuration\"),\".\"),mdx(\"p\",null,\"Again, if you don't configure this, things will work but your connection to PlanetScale will be vulnerable to man-in-the-middle attacks.\"),mdx(\"p\",null,\"If you're looking for an easy-to-use MySQL client, we recommend \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://arctype.com/\"}),\"Arctype\"),\". \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://docs.arctype.com/connect/planetscale\"}),\"Arctype integrates with PlanetScale\"),\" to let you connect to and switch between branches, create deploy requests, and more.\"),mdx(\"h2\",null,\"Certificate Authorities\"),mdx(\"h3\",null,\"What is a Certificate Authority (CA)?\"),mdx(\"p\",null,\"A \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://en.wikipedia.org/wiki/Certificate_authority\"}),\"Certificate Authority (CA)\"),\" is a trusted party that signs digital certificates used to identify websites and other services. Their most well known use is signing the certificates used by websites serving content over \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://en.wikipedia.org/wiki/HTTPS\"}),\"HTTPS\"),\". Using a signed certificate means that you can trust that you really are communicating with the website that you think you are, without someone else listening in.\"),mdx(\"h3\",null,\"Why is a Certificate Authority (CA) needed for TLS / SSL?\"),mdx(\"p\",null,\"Encryption alone won't provide trust, only confidentiality. Without a way to verify the entity at the other end of a secure connection, you risk establishing an encrypted connection to a malicious party. This means that TLS / SSL only provides real security when certificates are validated against specific trusted Certificate Authorities.\"),mdx(\"h3\",null,\"What is a CA root store?\"),mdx(\"p\",null,\"In day-to-day browsing you don't need to specify which CAs to trust, your operating system and / or browser come with a list of trusted authorities. These trusted authorities verify the identities of domain owners creating HTTPS certificates, and sign those certificates so that you can trust them as well. The root store of certificates from Certificate Authorities is a collection of certificates that are trusted to sign other certificates.\"),mdx(\"h3\",null,\"Why do I need to care about a CA when connecting to PlanetScale?\"),mdx(\"p\",null,\"PlanetScale uses certificates from a \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://en.wikipedia.org/wiki/Certificate_authority\"}),\"Certificate Authority (CA)\"),\" that is part of the system root available on almost all platforms. We do this so that we can provide the easiest possible way for you to connect securely to PlanetScale. No one should be able to listen in on traffic, and no one should be able to impersonate PlanetScale to trick you into connecting to them.\"),mdx(\"p\",null,\"Operating systems all come with CA root stores, but not every MySQL driver uses these. Drivers like those for Go, Java or .NET will use the system roots. This means they can provide an experience similar to your browser when connecting to PlanetScale. For these drivers you only have to indicate that you want to use TLS / SSL and that you want to run it in a mode that verifies the identity of PlanetScale. That way you can trust that you are safely connected to PlanetScale when the handshake completes.\"),mdx(\"p\",null,\"Many other drivers don't automatically load the system roots. Most notably, the \",mdx(\"inlineCode\",{parentName:\"p\"},\"libmysqlclient\"),\" C driver and all other drivers that use it, such as the drivers often used in Ruby (\",mdx(\"inlineCode\",{parentName:\"p\"},\"mysql2\"),\") and Python (\",mdx(\"inlineCode\",{parentName:\"p\"},\"mysqlclient\"),\"). This means you will need to specify the path to the CA certificates you want to trust. The best option is to point the driver at your system roots.\"),mdx(\"p\",null,\"Below we have listed common paths on which the CA root store can be found in various operating systems and distributions. Only configure this path if your driver absolutely needs it and it won't work without it. If you are using a driver where the system roots are loaded by default, such as Go, Java or .NET, we strongly recommend not configuring this option and depending on the default behavior of your driver.\"),mdx(\"h3\",null,\"CA root configuration\"),mdx(\"h4\",null,\"Linux\"),mdx(\"p\",null,\"On Linux, the path to the system CA roots depends on the distribution that you are using.\"),mdx(\"h4\",null,\"Debian / Ubuntu / Gentoo / Arch / Slackware\"),mdx(\"p\",null,\"This path also applies to Debian or Ubuntu derivatives. You need to make sure the \",mdx(\"inlineCode\",{parentName:\"p\"},\"ca-certificates\"),\" package is installed.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`/etc/ssl/certs/ca-certificates.crt\n`)),mdx(\"h4\",null,\"RedHat / Fedora / CentOS / Mageia / Vercel / Netlify\"),mdx(\"p\",null,\"This path also applies to RedHat or Fedora derivatives like Amazon Linux and Oracle Linux. This is the path to use for applications deployed on Vercel and Netlify.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`/etc/pki/tls/certs/ca-bundle.crt\n`)),mdx(\"h4\",null,\"Alpine\"),mdx(\"p\",null,\"This is a commonly used distribution for Docker containers.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`/etc/ssl/cert.pem\n`)),mdx(\"h4\",null,\"OpenSUSE\"),mdx(\"p\",null,\"This also applies to OpenSUSE derivatives.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`/etc/ssl/ca-bundle.pem\n`)),mdx(\"h4\",null,\"MacOS / FreeBSD / OpenBSD\"),mdx(\"p\",null,\"MacOS provides an extracted version of the system roots on disk that can be used for the CA roots. On FreeBSD you need to install the \",mdx(\"inlineCode\",{parentName:\"p\"},\"ca_root_nss\"),\" package for this path to be available.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`/etc/ssl/cert.pem\n`)),mdx(\"h4\",null,\"Windows\"),mdx(\"p\",null,\"Windows does not provide a file with the CA roots that can be used by your driver. Many languages often used on Windows like C#, Java or Go do not need the CA root path and will use the Windows internal system roots by default. In those environments, you don't need to specify a root CA list.\"),mdx(\"p\",null,\"If you are using a language that requires specifying the CA root path, like C or PHP, the \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://curl.se\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"curl\")),\" project provides an extracted bundle of root certificates from the \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://wiki.mozilla.org/CA\"}),\"Mozilla CA Certificate program\"),\". You can download the bundle at \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://curl.se/docs/caextract.html\"}),\"https://curl.se/docs/caextract.html\"),\". Once you download the file, you can point at it with the correct configuration options for the driver that you are using.\"),mdx(InfoBlock,{type:\"note\",mdxType:\"InfoBlock\"},\"We strongly discourage downloading only the current CA that we are using, as PlanetScale reserves the right to change our CA. We will however always use a CA that is commonly available.\"),mdx(\"h2\",null,\"Need help?\"),mdx(\"p\",null,\"Get help from \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.planetscale.com/support\"}),\"PlanetScale's support team\"),\", or join our \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/planetscale/beta/discussions\"}),\"GitHub Discussion board\"),\" to see how others are using PlanetScale.\"))}MDXContent.isMDXComponent=!0;\n","scope":{}},"fields":{"slug":"reference/secure-connections","lastUpdatedOn":"2021-12-25T02:12:47.022Z"}},"__N_SSG":true}